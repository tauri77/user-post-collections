(()=>{"use strict";var t,e,n,i,o,s,a,r,l,c,u,d={},_=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,m=Array.isArray;function f(t,e){for(var n in e)t[n]=e[n];return t}function g(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function h(e,n,i){var o,s,a,r={};for(a in n)"key"==a?o=n[a]:"ref"==a?s=n[a]:r[a]=n[a];if(arguments.length>2&&(r.children=arguments.length>3?t.call(arguments,2):i),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===r[a]&&(r[a]=e.defaultProps[a]);return v(e,r,o,s,null)}function v(t,i,o,s,a){var r={type:t,props:i,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==a?++n:a,__i:-1,__u:0};return null==a&&null!=e.vnode&&e.vnode(r),r}function y(t){return t.children}function b(t,e){this.props=t,this.context=e}function w(t,e){if(null==e)return t.__?w(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?w(t):null}function P(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return P(t)}}function k(t){(!t.__d&&(t.__d=!0)&&i.push(t)&&!C.__r++||o!==e.debounceRendering)&&((o=e.debounceRendering)||s)(C)}function C(){var t,n,o,s,r,l,c,u;for(i.sort(a);t=i.shift();)t.__d&&(n=i.length,s=void 0,l=(r=(o=t).__v).__e,c=[],u=[],o.__P&&((s=f({},r)).__v=r.__v+1,e.vnode&&e.vnode(s),D(o.__P,s,r,o.__n,o.__P.namespaceURI,32&r.__u?[l]:null,c,null==l?w(r):l,!!(32&r.__u),u),s.__v=r.__v,s.__.__k[s.__i]=s,O(c,s,u),s.__e!=l&&P(s)),i.length>n&&i.sort(a));C.__r=0}function N(t,e,n,i,o,s,a,r,l,c,u){var p,m,f,g,h,v=i&&i.__k||_,y=e.length;for(n.__d=l,x(n,e,v),l=n.__d,p=0;p<y;p++)null!=(f=n.__k[p])&&(m=-1===f.__i?d:v[f.__i]||d,f.__i=p,D(t,f,m,o,s,a,r,l,c,u),g=f.__e,f.ref&&m.ref!=f.ref&&(m.ref&&j(m.ref,null,f),u.push(f.ref,f.__c||g,f)),null==h&&null!=g&&(h=g),65536&f.__u||m.__k===f.__k?l=S(f,l,t):"function"==typeof f.type&&void 0!==f.__d?l=f.__d:g&&(l=g.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=l,n.__e=h}function x(t,e,n){var i,o,s,a,r,l=e.length,c=n.length,u=c,d=0;for(t.__k=[],i=0;i<l;i++)null!=(o=e[i])&&"boolean"!=typeof o&&"function"!=typeof o?(a=i+d,(o=t.__k[i]="string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?v(null,o,null,null,null):m(o)?v(y,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?v(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,s=null,-1!==(r=o.__i=T(o,n,a,u))&&(u--,(s=n[r])&&(s.__u|=131072)),null==s||null===s.__v?(-1==r&&d--,"function"!=typeof o.type&&(o.__u|=65536)):r!==a&&(r==a-1?d--:r==a+1?d++:(r>a?d--:d++,o.__u|=65536))):o=t.__k[i]=null;if(u)for(i=0;i<c;i++)null!=(s=n[i])&&!(131072&s.__u)&&(s.__e==t.__d&&(t.__d=w(s)),R(s,s))}function S(t,e,n){var i,o;if("function"==typeof t.type){for(i=t.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=t,e=S(i[o],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=w(t)),n.insertBefore(t.__e,e||null),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8===e.nodeType);return e}function I(t,e){return e=e||[],null==t||"boolean"==typeof t||(m(t)?t.some((function(t){I(t,e)})):e.push(t)),e}function T(t,e,n,i){var o=t.key,s=t.type,a=n-1,r=n+1,l=e[n];if(null===l||l&&o==l.key&&s===l.type&&!(131072&l.__u))return n;if(i>(null==l||131072&l.__u?0:1))for(;a>=0||r<e.length;){if(a>=0){if((l=e[a])&&!(131072&l.__u)&&o==l.key&&s===l.type)return a;a--}if(r<e.length){if((l=e[r])&&!(131072&l.__u)&&o==l.key&&s===l.type)return r;r++}}return-1}function A(t,e,n){"-"===e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||p.test(e)?n:n+"px"}function E(t,e,n,i,o){var s;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||A(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||A(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])s=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||"onFocusOut"===e||"onFocusIn"===e?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i?n.u=i.u:(n.u=r,t.addEventListener(e,s?c:l,s)):t.removeEventListener(e,s?c:l,s);else{if("http://www.w3.org/2000/svg"==o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!==e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==n?"":n))}}function L(t){return function(n){if(this.l){var i=this.l[n.type+t];if(null==n.t)n.t=r++;else if(n.t<i.u)return;return i(e.event?e.event(n):n)}}}function D(t,n,i,o,s,a,r,l,c,u){var d,_,p,g,h,v,w,P,k,C,x,S,I,T,A,E,L=n.type;if(void 0!==n.constructor)return null;128&i.__u&&(c=!!(32&i.__u),a=[l=n.__e=i.__e]),(d=e.__b)&&d(n);t:if("function"==typeof L)try{if(P=n.props,k="prototype"in L&&L.prototype.render,C=(d=L.contextType)&&o[d.__c],x=d?C?C.props.value:d.__:o,i.__c?w=(_=n.__c=i.__c).__=_.__E:(k?n.__c=_=new L(P,x):(n.__c=_=new b(P,x),_.constructor=L,_.render=W),C&&C.sub(_),_.props=P,_.state||(_.state={}),_.context=x,_.__n=o,p=_.__d=!0,_.__h=[],_._sb=[]),k&&null==_.__s&&(_.__s=_.state),k&&null!=L.getDerivedStateFromProps&&(_.__s==_.state&&(_.__s=f({},_.__s)),f(_.__s,L.getDerivedStateFromProps(P,_.__s))),g=_.props,h=_.state,_.__v=n,p)k&&null==L.getDerivedStateFromProps&&null!=_.componentWillMount&&_.componentWillMount(),k&&null!=_.componentDidMount&&_.__h.push(_.componentDidMount);else{if(k&&null==L.getDerivedStateFromProps&&P!==g&&null!=_.componentWillReceiveProps&&_.componentWillReceiveProps(P,x),!_.__e&&(null!=_.shouldComponentUpdate&&!1===_.shouldComponentUpdate(P,_.__s,x)||n.__v===i.__v)){for(n.__v!==i.__v&&(_.props=P,_.state=_.__s,_.__d=!1),n.__e=i.__e,n.__k=i.__k,n.__k.some((function(t){t&&(t.__=n)})),S=0;S<_._sb.length;S++)_.__h.push(_._sb[S]);_._sb=[],_.__h.length&&r.push(_);break t}null!=_.componentWillUpdate&&_.componentWillUpdate(P,_.__s,x),k&&null!=_.componentDidUpdate&&_.__h.push((function(){_.componentDidUpdate(g,h,v)}))}if(_.context=x,_.props=P,_.__P=t,_.__e=!1,I=e.__r,T=0,k){for(_.state=_.__s,_.__d=!1,I&&I(n),d=_.render(_.props,_.state,_.context),A=0;A<_._sb.length;A++)_.__h.push(_._sb[A]);_._sb=[]}else do{_.__d=!1,I&&I(n),d=_.render(_.props,_.state,_.context),_.state=_.__s}while(_.__d&&++T<25);_.state=_.__s,null!=_.getChildContext&&(o=f(f({},o),_.getChildContext())),k&&!p&&null!=_.getSnapshotBeforeUpdate&&(v=_.getSnapshotBeforeUpdate(g,h)),N(t,m(E=null!=d&&d.type===y&&null==d.key?d.props.children:d)?E:[E],n,i,o,s,a,r,l,c,u),_.base=n.__e,n.__u&=-161,_.__h.length&&r.push(_),w&&(_.__E=_.__=null)}catch(t){if(n.__v=null,c||null!=a){for(n.__u|=c?160:128;l&&8===l.nodeType&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,n.__e=l}else n.__e=i.__e,n.__k=i.__k;e.__e(t,n,i)}else null==a&&n.__v===i.__v?(n.__k=i.__k,n.__e=i.__e):n.__e=U(i.__e,n,i,o,s,a,r,c,u);(d=e.diffed)&&d(n)}function O(t,n,i){n.__d=void 0;for(var o=0;o<i.length;o++)j(i[o],i[++o],i[++o]);e.__c&&e.__c(n,t),t.some((function(n){try{t=n.__h,n.__h=[],t.some((function(t){t.call(n)}))}catch(t){e.__e(t,n.__v)}}))}function U(n,i,o,s,a,r,l,c,u){var _,p,f,h,v,y,b,P=o.props,k=i.props,C=i.type;if("svg"===C?a="http://www.w3.org/2000/svg":"math"===C?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=r)for(_=0;_<r.length;_++)if((v=r[_])&&"setAttribute"in v==!!C&&(C?v.localName===C:3===v.nodeType)){n=v,r[_]=null;break}if(null==n){if(null===C)return document.createTextNode(k);n=document.createElementNS(a,C,k.is&&k),c&&(e.__m&&e.__m(i,r),c=!1),r=null}if(null===C)P===k||c&&n.data===k||(n.data=k);else{if(r=r&&t.call(n.childNodes),P=o.props||d,!c&&null!=r)for(P={},_=0;_<n.attributes.length;_++)P[(v=n.attributes[_]).name]=v.value;for(_ in P)if(v=P[_],"children"==_);else if("dangerouslySetInnerHTML"==_)f=v;else if(!(_ in k)){if("value"==_&&"defaultValue"in k||"checked"==_&&"defaultChecked"in k)continue;E(n,_,null,v,a)}for(_ in k)v=k[_],"children"==_?h=v:"dangerouslySetInnerHTML"==_?p=v:"value"==_?y=v:"checked"==_?b=v:c&&"function"!=typeof v||P[_]===v||E(n,_,v,P[_],a);if(p)c||f&&(p.__html===f.__html||p.__html===n.innerHTML)||(n.innerHTML=p.__html),i.__k=[];else if(f&&(n.innerHTML=""),N(n,m(h)?h:[h],i,o,s,"foreignObject"===C?"http://www.w3.org/1999/xhtml":a,r,l,r?r[0]:o.__k&&w(o,0),c,u),null!=r)for(_=r.length;_--;)g(r[_]);c||(_="value","progress"===C&&null==y?n.removeAttribute("value"):void 0!==y&&(y!==n[_]||"progress"===C&&!y||"option"===C&&y!==P[_])&&E(n,_,y,P[_],a),_="checked",void 0!==b&&b!==n[_]&&E(n,_,b,P[_],a))}return n}function j(t,n,i){try{if("function"==typeof t){var o="function"==typeof t.__u;o&&t.__u(),o&&null==n||(t.__u=t(n))}else t.current=n}catch(t){e.__e(t,i)}}function R(t,n,i){var o,s;if(e.unmount&&e.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||j(o,null,n)),null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){e.__e(t,n)}o.base=o.__P=null}if(o=t.__k)for(s=0;s<o.length;s++)o[s]&&R(o[s],n,i||"function"!=typeof t.type);i||g(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function W(t,e,n){return this.constructor(t,n)}function H(n,i,o){var s,a,r,l;e.__&&e.__(n,i),a=(s="function"==typeof o)?null:o&&o.__k||i.__k,r=[],l=[],D(i,n=(!s&&o||i).__k=h(y,null,[n]),a||d,d,i.namespaceURI,!s&&o?[o]:a?null:i.firstChild?t.call(i.childNodes):null,r,!s&&o?o:a?a.__e:i.firstChild,s,l),O(r,n,l)}t=_.slice,e={__e:function(t,e,n,i){for(var o,s,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((s=o.constructor)&&null!=s.getDerivedStateFromError&&(o.setState(s.getDerivedStateFromError(t)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,i||{}),a=o.__d),a)return o.__E=o}catch(e){t=e}throw t}},n=0,b.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=f({},this.state),"function"==typeof t&&(t=t(f({},n),this.props)),t&&f(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),k(this))},b.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),k(this))},b.prototype.render=y,i=[],s="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,a=function(t,e){return t.__v.__b-e.__v.__b},C.__r=0,r=0,l=L(!1),c=L(!0),u=0;var $,M,F,Q,q=0,B=[],X=e,V=X.__b,K=X.__r,G=X.diffed,z=X.__c,J=X.unmount,Y=X.__;function Z(t,e){X.__h&&X.__h(M,t,q||e),q=0;var n=M.__H||(M.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function tt(t){return q=1,et(pt,t)}function et(t,e,n){var i=Z($++,2);if(i.t=t,!i.__c&&(i.__=[n?n(e):pt(void 0,e),function(t){var e=i.__N?i.__N[0]:i.__[0],n=i.t(e,t);e!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=M,!M.u)){var o=function(t,e,n){if(!i.__c.__H)return!0;var o=i.__c.__H.__.filter((function(t){return!!t.__c}));if(o.every((function(t){return!t.__N})))return!s||s.call(this,t,e,n);var a=!1;return o.forEach((function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(a=!0)}})),!(!a&&i.__c.props===t)&&(!s||s.call(this,t,e,n))};M.u=!0;var s=M.shouldComponentUpdate,a=M.componentWillUpdate;M.componentWillUpdate=function(t,e,n){if(this.__e){var i=s;s=void 0,o(t,e,n),s=i}a&&a.call(this,t,e,n)},M.shouldComponentUpdate=o}return i.__N||i.__}function nt(t,e){var n=Z($++,3);!X.__s&&_t(n.__H,e)&&(n.__=t,n.i=e,M.__H.__h.push(n))}function it(t){return q=5,ot((function(){return{current:t}}),[])}function ot(t,e){var n=Z($++,7);return _t(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function st(t,e){return q=8,ot((function(){return t}),e)}function at(t){var e=M.context[t.__c],n=Z($++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(M)),e.props.value):t.__}function rt(){for(var t;t=B.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ut),t.__H.__h.forEach(dt),t.__H.__h=[]}catch(e){t.__H.__h=[],X.__e(e,t.__v)}}X.__b=function(t){M=null,V&&V(t)},X.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Y&&Y(t,e)},X.__r=function(t){K&&K(t),$=0;var e=(M=t.__c).__H;e&&(F===M?(e.__h=[],M.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.i=t.__N=void 0}))):(e.__h.forEach(ut),e.__h.forEach(dt),e.__h=[],$=0)),F=M},X.diffed=function(t){G&&G(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==B.push(e)&&Q===X.requestAnimationFrame||((Q=X.requestAnimationFrame)||ct)(rt)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.i=void 0}))),F=M=null},X.__c=function(t,e){e.some((function(t){try{t.__h.forEach(ut),t.__h=t.__h.filter((function(t){return!t.__||dt(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],X.__e(n,t.__v)}})),z&&z(t,e)},X.unmount=function(t){J&&J(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{ut(t)}catch(t){e=t}})),n.__H=void 0,e&&X.__e(e,n.__v))};var lt="function"==typeof requestAnimationFrame;function ct(t){var e,n=function(){clearTimeout(i),lt&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,100);lt&&(e=requestAnimationFrame(n))}function ut(t){var e=M,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),M=e}function dt(t){var e=M;t.__c=t.__(),M=e}function _t(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function pt(t,e){return"function"==typeof e?e(t):e}const mt=function(t,e=!1){return MgUpcTexts&&MgUpcTexts[t]?e?e.reduce((function(t,e){return t.replace(/%s/,e)}),MgUpcTexts[t]):MgUpcTexts[t]:t},ft="ui/reset",gt="ui/error",ht="ui/message",vt="ui/editing",yt="listOfLists/set",bt="listOfLists/remove",wt="listOfLists/create",Pt="listOfList/addingPost",kt="listOfList/setPage",Ct="listOfList/setTotalPages",Nt="list/set",xt="list/update",St="list/setPage",It="list/setTotalPages",Tt="list/setItems",At="list/removeItem",Et="list/addItem",Lt="list/updateItem",Dt="list/moveItem",Ot="list/moveItemNext",Ut="list/moveItemPrev",jt="list/cart",Rt=async function(t,e="",n={},i="mg-upc/v1/lists"){if(void 0===Qt().nonce){const t=new FormData;t.append("action","mg_upc_user");const e={method:"POST",credentials:"same-origin",referrerPolicy:"no-referrer",body:t},n=await fetch(Qt().ajaxUrl,e),i=await n.json();i.nonce&&(Qt().nonce=i.nonce),i.user_id&&(Qt().user_id=i.user_id)}const o={method:t,credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":Qt().nonce},referrerPolicy:"no-referrer"};"GET"!==t&&n&&(o.body=JSON.stringify(n));const s=await fetch(Qt().root+i+e,o);return s.headers.get("x-wp-nonce")&&(Qt().nonce=s.headers.get("x-wp-nonce")),{data:await s.json(),headers:s.headers,status:s.status}};function Wt(t){const e=Object.entries(t).filter((([,t])=>null!=t)).map((([t,e])=>`${encodeURIComponent(t)}=${encodeURIComponent(String(e))}`)),n=-1!==Qt().root.indexOf("?")?"&":"?";return e.length>0?`${n}${e.join("&")}`:""}class Ht extends Error{constructor(t,e){super(t),this.name="MgApiError",this.code=e?.data?.code,this.response=e}}function $t(t){let e=t?.data?.data?.status;if(!e&&t.status&&(e=t.status),400===e||401===e||403===e||404===e||409===e||500===e)throw new Ht(t?.data?.message,t)}let Mt={my:function(t={}){return Rt("GET","/My"+Wt(t),{}).then((function(t){return $t(t),t}))},discover:function(t){return Rt("GET","/"+Wt(t),{}).then((function(t){return $t(t),t}))},get:function(t){return Rt("GET","/"+t,{}).then((function(t){return $t(t),t}))},cart:function(t){return Rt("POST","/cart",{list:t},"mg-upc/v1").then((function(t){return $t(t),t}))},items:function(t,e={}){return Rt("GET","/"+t+"/items"+Wt(e),{}).then((function(t){return $t(t),t}))},delete:function(t){return Rt("DELETE","/"+t,{}).then((function(t){return $t(t),t}))},create:function(t){return Rt("POST","",t).then((function(t){return $t(t),t}))},update:function(t){let e=t.id;return delete t.id,Rt("PATCH","/"+e,t).then((function(t){return $t(t),t}))},add:function(t,e,n={}){return"object"!=typeof e&&(e={post_id:e}),Rt("POST","/"+t+"/items"+Wt(n),e).then((function(t){return $t(t),t}))},quit:function(t,e,n={}){return Rt("DELETE","/"+t+"/items/"+e+Wt(n),{}).then((function(t){return $t(t),t}))},updateItem:function(t,e,n){return Rt("PATCH","/"+t+"/items/"+e,n).then((function(t){return $t(t),t}))},vote:function(t,e,n={}){return Rt("POST","/"+t+"/items/"+e+"/vote",n).then((function(t){return $t(t),t}))},move:function(t,e,n){return Rt("PATCH","/"+t+"/items/"+e,{position:n}).then((function(t){return $t(t),t}))}};const Ft=Mt;function Qt(){return MgUserPostCollections}function qt(){return Qt()?.sortable}function Bt(t){const e=Qt()?.types;return!(!e||!e[t])&&e[t]}function Xt(t){const e=Qt()?.statuses;return!(!e||!e[t])&&e[t]}function Vt(t,e){return!!t.type&&Gt(t.type,e)}function Kt(t){const e=[],n=Qt()?.types;for(const i in n)n.hasOwnProperty(i)&&(Gt(i,"always_exists")||(t?.type?n[i].available_post_types.includes(t.type)&&e.push(n[i]):e.push(n[i])));return e}function Gt(t,e){const n=Bt(t);return!(!n||!n.supports)&&n.supports.includes(e)}const zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=";function Jt(t){return JSON.parse(JSON.stringify(t))}function Yt(t){return"string"!=typeof t?"":t.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")}function Zt(t){return Ft.cart(t).then((t=>(jQuery&&t.data.fragments&&t.data.cart_hash&&jQuery(document.body).trigger("added_to_cart",[t.data.fragments,t.data.cart_hash]),t.data)))}function te(t,e="error"){if(!jQuery)return!1;const n=jQuery("<div>").addClass("mg-upc-alert mg-upc-alert-"+e);n.append(jQuery("<p>").html(t));const i=jQuery('<a class="mg-upc-alert-close" href="#"><span class="mg-upc-icon upc-font-close"></span></a>').on("click",(function(){return n.remove(),!1}));return n.append(i),n}function ee(t,e){const{type:n,payload:i}=e;let o=!1;const s=t=>(o=a({status:"failed"}),t.error&&(o.error=t.error.message?t.error.message:"",o.errorCode=t.error.code?t.error.code:""),o),a=(e=null)=>{if(o||(o=Jt(t)),e)for(const t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o},r=(t,e=0,n="succeeded")=>(0!==e&&(t.loadingCount=t.loadingCount+e),t.loadingCount<1?(t.loadingCount=0,t.status=n):t.status="loading",t);let l=function(t,e){const{type:n,payload:i}=e;let o,s;const a=(e=!1)=>{if(s||(s=!1===t?{}:Jt(t)),e)for(const t in e)s[t]=e[t];return s};switch(n){case Nt:return!0===i?{ID:-1,title:"",content:"",status:"",type:""}:i;case xt:return i.items=Jt(t.items),i;case wt:return i;case Tt:return a({items:i});case Et+"/failed":case Et:return i?.list?a(i.list):t;case Lt:const e=!!i.item&&i.item;return o=a().items.map((t=>t.post_id===i.post_id?e||Object.assign({},t,i):{...t})),a({items:o});case At:if(!t.items||1===t.items.length||!1===i)return t;if(s=a(),o=s.items.filter((t=>t.post_id!==i)),Gt(t.type,"sortable")){const e=parseInt(t.items[0].position,10);o.forEach(((t,n)=>{o[n].position=e+n}))}if(s.count=s.count-1,Gt(t.type,"vote")){const e=t.items.find((t=>t.post_id==i));e&&(s.vote_counter=s.vote_counter-e.votes)}return{...s,items:o};case Dt:const n=parseInt(t.items[0].position,10);o=a().items.slice();const r=a().items[i.oldIndex];return o.splice(i.oldIndex,1),o.splice(i.newIndex,0,r),isNaN(n)?(alert("positions error!"),t):(o.forEach(((t,e)=>{o[e].position=n+e})),a({items:o}));default:return t}}(t.list,e),c=function(t,e){const{type:n,payload:i}=e;switch(n){case yt:return i;case Et:case Nt:return!1;case bt:return!1===i?t:Jt(t.filter((t=>t.ID!=i)));default:return t}}(t.listOfList,e);switch(t.list===l&&c===t.listOfList||(o=a({listOfList:c,list:l}),t.addingPost||(o.title=o.list?o.list.title:se.title)),n){case"ui/mode":return a({mode:i});case ft:return{...se,mode:t.mode};case gt:return a(!1===i?{error:!1,errorCode:!1}:{error:i});case ht:return a(!1===i?{message:!1,errorCode:!1}:{message:i});case jt:const n=a();return i.msg&&(n.message=i.msg),i.err&&(n.error=i.err),n;case vt:return a({editing:i});case Pt:return o=a(),o.addingPost=i,i&&(o.title=mt("Add to...")),o;case wt:o=a(),o.title=i.title?i.title:se.title,o.listTotalPages=1,o.listPage=1,o.addingPost=!1;break;case Et:if(o=a(),i?.list){const t=i.list;o.title=t.title?t.title:se.title;const e=t?.items_page;e&&(o.listTotalPages=e["X-WP-TotalPages"]?e["X-WP-TotalPages"]:1,o.listPage=e["X-WP-Page"]?e["X-WP-Page"]:1)}i.message&&(o=r(o,-1,"failed"),o.error=i.message),o.addingPost=!1;break;case kt:return a({page:i});case Ct:return a({totalPages:i});case St:return a({listPage:i});case It:return a({listTotalPages:i});case Nt+"/loading":return o=r(a(),1),o.listOfList=!1,"object"==typeof i?(o.list=i,i.title&&(o.title=i.title)):o.list={ID:i},o;case At+"/loading":return o=r(a(),1),"object"==typeof i&&i.list_id&&(o.list={ID:i.list_id}),o;case yt+"/loading":case Tt+"/loading":case Lt+"/loading":case Et+"/loading":case Ot+"/loading":case Ut+"/loading":case xt+"/loading":case wt+"/loading":case jt+"/loading":return r(a(),1);case Et+"/succeeded":return o=r(a(),-1),o.addingPost=!1,o.status="succeeded",o.error=!1,o.errorCode=!1,o.title=o.list?o.list.title:se.title,o;case jt+"/succeeded":return r(a({errorCode:!1}),-1);case Nt+"/succeeded":var u={error:!1,errorCode:!1};return!1===t.list&&(u={}),r(a(u),-1);case yt+"/succeeded":case Tt+"/succeeded":case Lt+"/succeeded":case At+"/succeeded":case Dt+"/succeeded":case Ot+"/succeeded":case Ut+"/succeeded":case xt+"/succeeded":case wt+"/succeeded":return r(a({error:!1,errorCode:!1}),-1);case wt+"/failed":return o=r(a(),-1,"failed"),e.error&&e.error.message&&(o.error=e.error.message),o;case Et+"/failed":if(o=r(a(),-1),o.addingPost=!1,o.title=o.list?o.list.title:se.title,i?.list){const t=i.list;o.title=t.title?t.title:se.title;const e=t?.items_page;e&&(o.listTotalPages=e["X-WP-TotalPages"]?e["X-WP-TotalPages"]:1,o.listPage=e["X-WP-Page"]?e["X-WP-Page"]:1)}return i.message&&(o.error=i.message,o.status="failed"),s(e);case yt+"/failed":case Tt+"/failed":case Lt+"/failed":case At+"/failed":case Dt+"/failed":case Ot+"/failed":case Ut+"/failed":case xt+"/failed":case Nt+"/failed":case jt+"/failed":return r(s(e),-1)}return!1!==o?o:t}const ne=(t,e)=>function(n=null,...i){return{asyncThunk:!0,payload:e,type:t,arg:n,extra:i}};class ie extends Error{constructor(t,e){super(t),this.name="MgUpcRejectWithValue",this.value=e}}const oe=(t,e)=>n=>{let i;if((o=n)&&"object"==typeof o&&!0===o.asyncThunk){let o={dispatch:oe(t,e),getState:e,extra:n.extra,rejectWithValue:t=>new ie(n.type+": rejectWithValue",t)};t({type:n.type+"/loading",payload:n.arg}),i=n.payload(n.arg,o)}else{if(!(t=>!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then)(n.payload))return void t(n);t({type:n.type+"/loading"}),i=n.payload}var o;i.then((e=>{e instanceof ie?t({type:n.type+"/failed",payload:e.value}):(t({type:n.type,payload:e}),t({type:n.type+"/succeeded"}))})).catch((e=>{t(e instanceof ie?{type:n.type+"/failed",payload:e.value}:{type:n.type+"/failed",error:e})}))},se={list:!1,listOfList:!1,addingPost:null,status:"idle",loadingCount:0,error:null,message:null,errorCode:null,editing:!1,title:mt("My Lists"),actualAction:"init",page:1,totalPages:1,listPage:1,listTotalPages:1,mode:"my"},ae=function(t,e){var n={__c:e="__cC"+u++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,i;return this.getChildContext||(n=new Set,(i={})[e]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.forEach((function(t){t.__e=!0,k(t)}))},this.sub=function(t){n.add(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n&&n.delete(t),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}({});function re(t){return new Date(t).toLocaleDateString()}const le=function(t){const{state:e,dispatch:n}=at(ae);return h("li",{className:"mg-upc-dg-item-list",onClick:t.onClick,onKeyPress:e=>{13===e.keyCode&&t.onClick(e)},tabIndex:"0"},h("i",{className:"mg-upc-icon mg-upc-dg-item-type mg-upc-dg-item-type-"+t.list.type}),h("div",{className:"mg-upc-dg-item-title"},h("span",null,t.list.title),"my"!==e.mode&&h(y,null,h("span",null,h("a",{href:"#",onClick:function(e){!function(t){t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault()}(e),function(t,e){const n=new URLSearchParams(document.location.hash.substring(1));n.set("author",e);let i=n.toString();""!==i&&(i="#"+i),window.location.hash=i}(0,t.list.author)}},t.list.user_login),h("span",{className:"mg-upc-list-dates"},h("i",null," ",h("b",null,"Created:")," ",re(t.list.created)),h("i",null," ",h("b",null,"Modified:")," ",re(t.list.modified)))))),h("span",{className:"mg-upc-dg-item-count"},t.list.count),h("span",{className:"mg-upc-dg-item-actions"},t.onRemove&&h("button",{"aria-label":mt("Remove List"),onClick:e=>{e.stopPropagation(),t.onRemove(t.list)}},h("span",{className:"mg-upc-icon upc-font-trash"}))))};class ce extends b{static defaultProps={count:1,duration:1.2,width:null,wrapper:null,height:null,circle:!1};render(){const t=[];for(let e=0;e<this.props.count;e++){let n=this.props.styles?this.props.styles:{};null!=this.props.width&&(n.width=this.props.width),null!=this.props.height&&(n.height=this.props.height),null!==this.props.width&&null!==this.props.height&&this.props.circle&&(n.borderRadius="50%"),t.push(h("span",{key:e,className:"mg-upc-dg-loading-skeleton",style:n},"‌"))}const e=this.props.wrapper;return h("span",null,e?t.map(((t,n)=>h(e,{key:n},t,"‌"))):t)}}const ue=function(t){return h("div",{className:"mg-upc-dg-pagination-div"},h("button",{className:1===t.page?"mg-upc-dg-hidden mg-upc-dg-pagination":"mg-upc-dg-pagination",ref:t.prevRef,disabled:1===t.page,"aria-label":mt("Previous page"),title:mt("Previous page"),onClick:t.onPreview},h("span",{className:"mg-upc-icon upc-font-arrow_left"})),h("span",{className:t.totalPages>1?"mg-upc-dg-pagination-current":"mg-upc-dg-hidden mg-upc-dg-pagination-current"},t.page),h("button",{className:t.page>=t.totalPages?"mg-upc-dg-hidden mg-upc-dg-pagination":"mg-upc-dg-pagination",ref:t.nextRef,disabled:t.page>=t.totalPages,"aria-label":mt("Next page"),title:mt("Next page"),onClick:t.onNext},h("span",{className:"mg-upc-icon upc-font-arrow_right"})))},de=()=>({type:ft,payload:null}),_e=t=>({type:Pt,payload:t}),pe=t=>({type:vt,payload:t}),me=ne(jt,(async function(t,e){return await Zt(t)})),fe=ne(yt,(async function(t,e){const n=t?.addingPost;return null===t&&(t={}),t.addingPost?t.adding=t.addingPost:(t.adding="",delete t.adding),await Ft.my(t).then((t=>ge(t,e,n)))}));function ge(t,e,n){if(t.headers.get("x-wp-page")&&(e.dispatch(ve(parseInt(t.headers.get("x-wp-page"),10))),e.dispatch(ye(parseInt(t.headers.get("X-WP-TotalPages"),10)))),n&&t.headers.get("X-WP-Post-Type")){const i={post_id:n},o={"X-WP-Post-Type":"type","X-WP-Post-Title":"title","X-WP-Post-Image":"image"};for(const e in o){const n=t.headers.get(e);n&&(i[o[e]]=decodeURIComponent(n))}e.dispatch(_e(i))}return t.data}ne(yt,(async function(t,e){return null===t&&(t={}),await Ft.discover(t).then((t=>ge(t,e,!1)))}));const he=ne(bt,(async function(t,e){return await Ft.delete(t).then((n=>{if(1===e.getState().listOfList.length){const n=e.getState().page,i=e.getState().totalPages;if(n<i)e.dispatch(fe({page:n}));else{if(!(n>1&&n===i))return t;e.dispatch(fe({page:n-1}))}return!1}return t}))})),ve=t=>({type:kt,payload:t}),ye=t=>({type:Ct,payload:t}),be=t=>({type:St,payload:t}),we=t=>({type:It,payload:t}),Pe=ne(Nt,(async function(t,e){return!1===t||!0===t?t:await Ft.get("object"==typeof t?t.ID:t).then((t=>(Le(t,e.dispatch),t.data)))})),ke=ne(xt,(async function(t,e){return await Ft.update(t).then((t=>(e.dispatch(pe(!1)),Le(t,e.dispatch),t.data)))})),Ce=ne(wt,(async function(t,e){return null===t&&(t={}),t.adding&&t.adding!==e.getState().addingPost&&e.dispatch(_e({id:t.addingPost})),await Ft.create(t).then((t=>(e.dispatch(pe(!1)),Le(t,e.dispatch),t.data)))})),Ne=ne(Tt,(async function(t,e){return await Ft.items(e.getState().list.ID,t).then((t=>(Le(t,e.dispatch),t.data)))})),xe=ne(At,(async function(t,e){const n=e.getState();var i=e.extra.length>0?e.extra[0]:n.list.ID;const o=e.extra.length>1?e.extra[1]:"view";return await Ft.quit(i,t,{context:o}).then((s=>{if(s.data&&s.data.list_id&&(i=s.data.list_id),n.list&&n.list.ID)if(1===n.list.items.length){if(n.list&&"view"===o){const t=n.listPage,i=n.listTotalPages;return t<i?e.dispatch(Ne({page:t})):t===i&&e.dispatch(Ne({page:Math.max(1,t-1)})),!1}}else n.list&&"view"===o&&n.listTotalPages===n.listPage+1&&n.list.count%n.list.items.length==1&&e.dispatch(Ne({page:n.listPage}));else e.dispatch(Pe({ID:i}));return t}))})),Se=ne(Et,(async function(t,e){let n=e.extra[0],i=!1;try{await Ft.add(t,n,{context:e.extra.length>1?e.extra[1]:"view"}).then((t=>{i=t.data}))}catch(t){const n=t?.response?.data;i=e.rejectWithValue(n)}return i})),Ie=ne(Lt,(async function(t,e){const n=e.extra[0];return await Ft.updateItem(e.getState().list.ID,t,n).then((e=>({...n,post_id:t,item:e?.data?.item})))})),Te=ne(Dt,(async function(t,e){const n=e.extra[0],i=e.extra[1],o=n.items[t],s=o.position-t+i;return await Ft.move(n.ID,o.post_id,s).then((e=>({oldIndex:t,newIndex:i})))})),Ae=ne(Ot,(async function(t,e){const n=e.getState().list,i=parseInt(n.items[n.items.length-1].position,10);if(isNaN(i))throw alert("positions error!"),"positions error!";const o=n.items[t];return await Ft.move(n.ID,o.post_id,i+1),await e.dispatch(Ne({page:e.getState().listPage})),t})),Ee=ne(Ut,(async function(t,e){const n=e.getState().list,i=parseInt(n.items[0].position,10);if(isNaN(i))throw alert("positions error!"),"positions error!";const o=n.items[t];return await Ft.move(n.ID,o.post_id,i-1),await e.dispatch(Ne({page:e.getState().listPage})),t}));function Le(t,e){!t.data.items_page&&t.headers.get("x-wp-page")?(e(be(parseInt(t.headers.get("x-wp-page"),10))),e(we(parseInt(t.headers.get("X-WP-TotalPages"),10)))):t.data.items_page&&(e(be(parseInt(t.data.items_page["X-WP-Page"],10))),e(we(parseInt(t.data.items_page["X-WP-TotalPages"],10))))}const De=function(t){const{state:e,dispatch:n}=at(ae);return h(y,null,h("ul",{className:"mg-upc-dg-list-of-lists-fake mg-upc-dg-on-loading"},[0,1,2].map((t=>h("li",{className:"mg-upc-dg-item-list"},h("div",null,h(ce,{width:"1.5em",height:"1.5em"})),h("div",{className:"mg-upc-dg-item-title"},h(ce,null)),h("div",{className:"mg-upc-dg-item-count"},h(ce,null)))))),h("ul",{className:"mg-upc-dg-list-of-lists"},t.lists&&t.lists.map((e=>h(le,{list:e,onClick:()=>t.onSelect(e),onRemove:t.onRemove,key:e.ID})))),e.totalPages>1&&h(ue,{totalPages:e.totalPages,page:e.page,onPreview:t.loadPreview,onNext:t.loadNext}))},Oe=function(t){const[e,n]=tt(!1),[i,o]=tt(""),s=it({});nt((()=>{o(t.item.description)}),[t.item]),nt((()=>{e&&s.current.focus()}),[e]);const a=()=>"string"==typeof i&&i.length>0;return h(y,null,h("span",null,h("br",null),"Adding item:"),h("div",{className:"mg-upc-dg-item mg-upc-dg-item-adding","data-post_id":t.item.post_id},h("span",{className:"mg-upc-icon upc-font-add"}),h("span",null," "),h("img",{className:"mg-upc-dg-item-image",src:t.item.image?t.item.image:zt}),h("div",{className:"mg-upc-dg-item-data"},h("a",{href:t.item?.link},t.item?.title),!e&&h("p",null,t.item?.description),!e&&h("button",{onClick:()=>{n(!0)}},a()&&h("span",null,mt("Edit Comment")),!a()&&h("span",null,mt("Add Comment"))),h("input",{ref:s,className:e?"mg-upc-dg-btn-item-desc":"mg-upc-dg-dn",type:"text",value:i,onChange:function(t){o(t.target.value)},onKeyDown:e=>{"Enter"===e.key&&(n(!1),t.onSaveItemDescription(i))},maxLength:400}),e&&h("button",{className:"mg-upc-dg-btn-item-desc-cancel",onClick:()=>{n(!1),o(t.item.description)}},h("span",{className:"mg-upc-icon upc-font-close"}),h("span",null,mt("Cancel"))),e&&h("button",{className:"mg-upc-dg-btn-item-desc-save",onClick:()=>{n(!1),t.onSaveItemDescription(i)}},h("span",{className:"mg-upc-icon upc-font-save"}),h("span",null,mt("Save"))))),h("span",null,mt("Select where the item will be added:")))};function Ue(){return Ue=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ue.apply(null,arguments)}function je(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var i in e)if("__source"!==i&&t[i]!==e[i])return!0;return!1}function Re(t,e){this.props=t,this.context=e}(Re.prototype=new b).isPureReactComponent=!0,Re.prototype.shouldComponentUpdate=function(t,e){return je(this.props,t)||je(this.state,e)};var We=e.__b;e.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),We&&We(t)},"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref");var He=e.__e;e.__e=function(t,e,n,i){if(t.then)for(var o,s=e;s=s.__;)if((o=s.__c)&&o.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),o.__c(t,e);He(t,e,n,i)};var $e=e.unmount;function Me(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),t.__c.__H=null),null!=(t=function(t,e){for(var n in e)t[n]=e[n];return t}({},t)).__c&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return Me(t,e,n)}))),t}function Fe(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return Fe(t,e,n)})),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function Qe(){this.__u=0,this.t=null,this.__b=null}function qe(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Be(){this.u=null,this.o=null}e.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),$e&&$e(t)},(Qe.prototype=new b).__c=function(t,e){var n=e.__c,i=this;null==i.t&&(i.t=[]),i.t.push(n);var o=qe(i.__v),s=!1,a=function(){s||(s=!0,n.__R=null,o?o(r):r())};n.__R=a;var r=function(){if(! --i.__u){if(i.state.__a){var t=i.state.__a;i.__v.__k[0]=Fe(t,t.__c.__P,t.__c.__O)}var e;for(i.setState({__a:i.__b=null});e=i.t.pop();)e.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(a,a)},Qe.prototype.componentWillUnmount=function(){this.t=[]},Qe.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=Me(this.__b,n,i.__O=i.__P)}this.__b=null}var o=e.__a&&h(y,null,t.fallback);return o&&(o.__u&=-33),[h(y,null,e.__a?null:t.children),o]};var Xe=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function Ve(t){return this.getChildContext=function(){return t.context},t.children}function Ke(t){var e=this,n=t.i;e.componentWillUnmount=function(){H(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(t){this.childNodes.push(t),e.i.appendChild(t)},insertBefore:function(t,n){this.childNodes.push(t),e.i.appendChild(t)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.i.removeChild(t)}}),H(h(Ve,{context:e.context},t.__v),e.l)}(Be.prototype=new b).__a=function(t){var e=this,n=qe(e.__v),i=e.o.get(t);return i[0]++,function(o){var s=function(){e.props.revealOrder?(i.push(o),Xe(e,t,i)):o()};n?n(s):s()}},Be.prototype.render=function(t){this.u=null,this.o=new Map;var e=I(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},Be.prototype.componentDidUpdate=Be.prototype.componentDidMount=function(){var t=this;this.o.forEach((function(e,n){Xe(t,n,e)}))};var Ge="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,ze=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Je=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Ye=/[A-Z0-9]/g,Ze="undefined"!=typeof document,tn=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(t)};b.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(b.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var en=e.event;function nn(){}function on(){return this.cancelBubble}function sn(){return this.defaultPrevented}e.event=function(t){return en&&(t=en(t)),t.persist=nn,t.isPropagationStopped=on,t.isDefaultPrevented=sn,t.nativeEvent=t};var an={enumerable:!1,configurable:!0,get:function(){return this.class}},rn=e.vnode;e.vnode=function(t){"string"==typeof t.type&&function(t){var e=t.props,n=t.type,i={},o=-1===n.indexOf("-");for(var s in e){var a=e[s];if(!("value"===s&&"defaultValue"in e&&null==a||Ze&&"children"===s&&"noscript"===n||"class"===s||"className"===s)){var r=s.toLowerCase();"defaultValue"===s&&"value"in e&&null==e.value?s="value":"download"===s&&!0===a?a="":"translate"===r&&"no"===a?a=!1:"o"===r[0]&&"n"===r[1]?"ondoubleclick"===r?s="ondblclick":"onchange"!==r||"input"!==n&&"textarea"!==n||tn(e.type)?"onfocus"===r?s="onfocusin":"onblur"===r?s="onfocusout":Je.test(s)&&(s=r):r=s="oninput":o&&ze.test(s)?s=s.replace(Ye,"-$&").toLowerCase():null===a&&(a=void 0),"oninput"===r&&i[s=r]&&(s="oninputCapture"),i[s]=a}}"select"==n&&i.multiple&&Array.isArray(i.value)&&(i.value=I(e.children).forEach((function(t){t.props.selected=-1!=i.value.indexOf(t.props.value)}))),"select"==n&&null!=i.defaultValue&&(i.value=I(e.children).forEach((function(t){t.props.selected=i.multiple?-1!=i.defaultValue.indexOf(t.props.value):i.defaultValue==t.props.value}))),e.class&&!e.className?(i.class=e.class,Object.defineProperty(i,"className",an)):(e.className&&!e.class||e.class&&e.className)&&(i.class=i.className=e.className),t.props=i}(t),t.$$typeof=Ge,rn&&rn(t)};var ln=e.__r;e.__r=function(t){ln&&ln(t),t.__c};var cn=e.diffed;e.diffed=function(t){cn&&cn(t);var e=t.props,n=t.__e;null!=n&&"textarea"===t.type&&"value"in e&&e.value!==n.value&&(n.value=null==e.value?"":e.value)};var un=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'];function dn(t){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=t,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}function _n(t,e){return n=(e||document).querySelectorAll(t),Array.prototype.slice.call(n);var n}function pn(t){(t.querySelector("[autofocus]")||t).focus()}function mn(){_n("[data-a11y-dialog]").forEach((function(t){new dn(t)}))}dn.prototype.create=function(){this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=_n('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach(function(t){t.addEventListener("click",this._show)}.bind(this));const t=this.$el;return this._closers=_n("[data-a11y-dialog-hide]",this.$el).filter((function(e){return e.closest('[aria-modal="true"], [data-a11y-dialog]')===t})).concat(_n('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach(function(t){t.addEventListener("click",this._hide)}.bind(this)),this._fire("create"),this},dn.prototype.show=function(t){if(this.shown)return this;this._previouslyFocused=document.activeElement;const e=t&&t.target?t.target:null;return e&&Object.is(this._previouslyFocused,document.body)&&(this._previouslyFocused=e),this.$el.removeAttribute("aria-hidden"),this.shown=!0,pn(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",t),this},dn.prototype.hide=function(t){return this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",t),this):this},dn.prototype.destroy=function(){return this.hide(),this._openers.forEach(function(t){t.removeEventListener("click",this._show)}.bind(this)),this._closers.forEach(function(t){t.removeEventListener("click",this._hide)}.bind(this)),this._fire("destroy"),this._listeners={},this},dn.prototype.on=function(t,e){return void 0===this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].push(e),this},dn.prototype.off=function(t,e){var n=(this._listeners[t]||[]).indexOf(e);return n>-1&&this._listeners[t].splice(n,1),this},dn.prototype._fire=function(t,e){var n=this._listeners[t]||[],i=new CustomEvent(t,{detail:e});this.$el.dispatchEvent(i),n.forEach(function(t){t(this.$el,e)}.bind(this))},dn.prototype._bindKeypress=function(t){const e=document.activeElement;e&&e.closest('[aria-modal="true"]')!==this.$el||(this.shown&&"Escape"===t.key&&"alertdialog"!==this.$el.getAttribute("role")&&(t.preventDefault(),this.hide(t)),this.shown&&"Tab"===t.key&&function(t,e){var n=function(t){return _n(un.join(","),t).filter((function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}))}(t),i=n.indexOf(document.activeElement);e.shiftKey&&0===i?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||i!==n.length-1||(n[0].focus(),e.preventDefault())}(this.$el,t))},dn.prototype._maintainFocus=function(t){!this.shown||t.target.closest('[aria-modal="true"]')||t.target.closest("[data-a11y-dialog-ignore-focus-trap]")||pn(this.$el)},"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",mn):window.requestAnimationFrame?window.requestAnimationFrame(mn):window.setTimeout(mn,16));const fn=t=>{const e=(()=>{const[t,e]=tt(!1);return nt((()=>e(!0)),[]),t})(),[n,i]=(t=>{const[e,n]=(()=>{const[t,e]=tt(null);return[t,st((t=>{null!==t&&e(new dn(t))}),[])]})(),i=st((()=>e.hide()),[e]),o=t.role||"dialog",s="alertdialog"===o,a=t.titleId||t.id+"-title";return nt((()=>()=>{e&&e.destroy()}),[e]),[e,{container:{id:t.id,ref:n,role:o,tabIndex:-1,"aria-modal":!0,"aria-hidden":!0,"aria-labelledby":a},overlay:{onClick:s?void 0:i},dialog:{role:"document"},closeButton:{type:"button",onClick:i},title:{role:"heading","aria-level":1,id:a}}]})(t),{dialogRef:o}=t;if(nt((()=>(n&&o(n),()=>o(void 0))),[o,n]),!e)return null;const s=t.dialogRoot?document.querySelector(t.dialogRoot):document.body,a=h("h2",Ue({},i.title,{className:t.classNames.title,key:"title"}),t.onBack&&h("a",{"aria-label":t.backButtonLabel,href:"#",onClick:e=>{e.preventDefault(),t.onBack(e)}},"←")," ",t.title),r=h("button",Ue({},i.closeButton,{className:t.classNames.closeButton,"aria-label":t.closeButtonLabel,key:"button"}),t.closeButtonContent),l=["first"===t.closeButtonPosition&&r,a,t.children,"last"===t.closeButtonPosition&&r].filter(Boolean);return function(t,e){var n=h(Ke,{__v:t,i:e});return n.containerInfo=e,n}(h("div",Ue({},i.container,{className:t.classNames.container}),h("div",Ue({},i.overlay,{className:t.classNames.overlay})),h("div",Ue({},i.dialog,{className:t.classNames.dialog}),l)),s)};fn.defaultProps={role:"dialog",closeButtonLabel:"Close this dialog window",closeButtonContent:"×",closeButtonPosition:"first",classNames:{},backButtonLabel:"Back",dialogRef:()=>{}},function(t){function e(e,i,o,s){const a=o||s.parent(),r=a.find(".mg-upc-item-vote").attr("disabled",!0);mgUpcApiClient.vote(e,i,{context:"web",posts:n(a)}).then((function(e){t(document.body).trigger("mg_upc_vote_response",[e,a])})).catch((function(t){r.attr("disabled",!1),t.response?.data?.message&&(s?s.append(te(t.response.data.message)):a.before(te(t.response.data.message)))}))}function n(e){return[...e.children().map((function(){return t(this).data("pid")}))].join(",")}t(".mg-upc-item-vote").on("click",(function(){const n=t(this).data("vote").split(",");return 2===n.length&&e(n[0],n[1],!1,t(this).closest(".mg-upc-item")),!1})),t((function(){t(".mg-upc-vote").each((function(){const n=t(this);e(n.data("id"),0,n.find(".mg-upc-items-container"),!1)}))})),t(document.body).on("mg_upc_vote_response",(function(e,n,i){if(!n.data)return;const o=parseInt(n.data.vote_counter,10),s=i.find(".mg-upc-item-vote");i.data("votes",o),n.data.can_vote?s.attr("disabled",!1).show():s.animate({width:0,padding:0,opacity:0},200,(function(){s.remove()})),n.data.posts.forEach((function(e){const n=i.find(".mg-upc-item[data-pid="+e.post_id+"]"),s=parseInt(e.votes,10);t(document.body).trigger("mg_upc_item_vote_set",[n,s,o])}))})),t(document.body).on("mg_upc_item_vote_set",(function(t,e,n,i){const o=i>0?Math.round(1e3*n/i)/10:0,s=e.find(".mg-upc-votes");s.find(".mg-upc-item-votes-number").html(n),s.find(".mg-upc-item-percent").html(o+"%"),s.find(".mg-upc-item-bar-progress").animate({width:o+"%"}),s.show()}))}(jQuery),function(t){t(".mg-upc-add-product-to-list").on("click",(function(){let e=t(this).data("id");const n=t(this).closest(".product,.summary").find("[name='variation_id']");return n.length>0&&parseInt(n.val(),10)>0&&(e=n.val()),window.addItemToList(e),!1}));const e="mg-upc-btn-loading",n="mg-upc-product-added",i="mg-upc-product-error",o="Sorry, an error occurred.";function s(a,r,l){if(r.hasClass(e))return!1;let c={product_id:r.data("product"),quantity:r.data("quantity")};if("0"==c.quantity){if(!l)return!!confirm(mt("The quantity is zero! Do you want to add a unit?"))&&s(a,r,!0);c.quantity=1}t(document.body).trigger("adding_to_cart",[r,c]);const u=woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart");return t.ajax({type:"POST",url:u,data:c,beforeSend:function(t){r.removeClass(n+" "+i).addClass(e)},success:function(i){r.removeClass(e),i&&(i.error&&i.product_url?alert(o):(r.addClass(n),t(document.body).trigger("added_to_cart",[i.fragments,i.cart_hash,r])))},error:function(){r.addClass(i).removeClass(e),alert(o)}}),!1}function s(a,r,l){if(r.hasClass(e))return!1;let c={product_id:r.data("product"),quantity:r.data("quantity")};if("0"==c.quantity){if(!l)return!!confirm(mt("The quantity is zero! Do you want to add a unit?"))&&s(a,r,!0);c.quantity=1}t(document.body).trigger("adding_to_cart",[r,c]);const u=woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart");return t.ajax({type:"POST",url:u,data:c,beforeSend:function(t){r.removeClass(n+" "+i).addClass(e)},success:function(i){r.removeClass(e),i&&(i.error&&i.product_url?alert(o):(r.addClass(n),t(document.body).trigger("added_to_cart",[i.fragments,i.cart_hash,r])))},error:function(){r.addClass(i).removeClass(e),alert(o)}}),!1}t((function(){if("undefined"==typeof wc_add_to_cart_params)return!1;t(".mg-upc-item-product").removeClass("mg-upc-hide").on("click",(function(e){return s(e,t(this),!1)})),t(".mg-upc-add-list-to-cart").removeClass("mg-upc-hide").on("click",(function(s){const a=t(this);return a.hasClass(e)||(a.removeClass(n+" "+i).addClass(e),window.mgUpcAddListToCart(t(this).data("id")).then((function(i){a.removeClass(e),i.err&&a.before(te(Yt(i.err))),i.msg&&a.before(te(Yt(i.msg),"success")),a.addClass(n),t(document.body).trigger("added_to_cart",[i.fragments,i.cart_hash,a])})).catch((t=>{a.removeClass(e),t.response?.data?.message?a.before(te(Yt(t.response.data.message))):alert(o)}))),!1}))}))}(jQuery);const gn=function(t){const[e,n]=tt(""),[i,o]=tt(""),[s,a]=tt(""),[r,l]=tt(""),c=ot((()=>Kt(t.addingPost)),[t.addingPost]);function u(t){t.default_title&&n(t.default_title),t.default_status&&l(t.default_status),a(t.name)}return""===s&&1===c.length&&u(c[0]),nt((()=>{n(t.list.title),o(t.list.content),a(t.list.type),l(t.list.status)}),[t.list.title,t.list.content,t.list.type,t.list.type]),nt((()=>{Bt(s)?.available_statuses&&-1===Bt(s).available_statuses.indexOf(r)&&l(Bt(s).available_statuses[0])}),[s]),h("div",{className:"mg-list-edit"},-1===t.list.ID&&""===s&&h(y,null,h("label",null,mt("Select a list type:")),h("ul",{id:`type-${t.list.ID}`},c.map(((t,e)=>h("li",{className:"mg-upc-dg-item-list-type",key:t.name,onClick:()=>u(t),onKeyPress:e=>{13===e.keyCode&&u(t)},tabIndex:"0"},h("i",{className:"mg-upc-icon mg-upc-dg-item-type mg-upc-dg-item-type-"+t.name}),h("div",{className:"mg-upc-dg-item-title"},h("strong",null,t.label),h("div",{className:"mg-upc-dg-item-desc"},t.description))))))),""!==s&&Gt(s,"editable_title")&&h(y,null,h("label",{htmlFor:`title-${t.list.ID}`},mt("Title")),h("input",{id:`title-${t.list.ID}`,type:"text",value:e,onChange:function(t){n(t.target.value)},maxLength:100})),""!==s&&Gt(s,"editable_content")&&h(y,null,h("label",{htmlFor:`content-${t.list.ID}`},mt("Description")),h("textarea",{id:`content-${t.list.ID}`,value:i,onChange:function(t){o(t.target.value)},maxLength:500}),h("span",{className:"mg-upc-dg-list-desc-edit-count"},h("i",null,i?.length),"/500")),""!==s&&!Bt(s)&&h("span",null,mt("Unknown List Type...")),""!==s&&Bt(s)?.available_statuses&&Bt(s).available_statuses.length>1&&h(y,null,h("label",{htmlFor:`status-${t.list.ID}`},mt("Status")),h("select",{id:`status-${t.list.ID}`,value:r,onChange:function(t){l(t.target.value)}},Bt(s).available_statuses.map(((t,e)=>{if(function(t){const e=Xt(t);return e&&e.show_in_status_list}(t))return h("option",{value:t},function(t){const e=Xt(t);return e?e.label:t}(t))})))),""!==s&&Bt(s)&&h("div",{className:"mg-upc-dg-edit-actions"},h("button",{onClick:()=>t.onSave({title:e,content:i,type:s,status:r})},h("span",{className:"mg-upc-icon upc-font-save"}),h("span",null,mt("Save"))),h("button",{onClick:()=>t.onCancel()},h("span",{className:"mg-upc-icon upc-font-close"}),h("span",null,mt("Cancel")))))},hn=function(t){const[e,n]=tt(!1),[i,o]=tt(""),[s,a]=tt(t.item?.quantity),r=it({});nt((()=>{o(t.item.description)}),[t.item]),nt((()=>{e&&r.current.focus()}),[e]);const l=it(!1);return nt((()=>{t.item.quantity!==s&&(clearTimeout(l.current),l.current=setTimeout((function(){t.onSaveItemQuantity(s)}),600))}),[s]),h("li",{className:"mg-upc-dg-item","data-post_id":t.item.post_id},Vt(t.list,"sortable")&&h(y,null,h("span",{className:"mg-upc-dg-item-handle","aria-draggable":!0},"::"),h("span",{className:"mg-upc-dg-item-number"},t.item.position)),Vt(t.list,"vote")&&h(y,null,h("span",{className:"mg-upc-dg-item-number"},(()=>{const e=parseInt(t.list.vote_counter,10);return Vt(t.list,"vote")&&e>0?Math.round(100*parseInt(t.item.votes,10)/e)+"%":"0%"})())),h("a",{href:t.item.link},h("img",{className:"mg-upc-dg-item-image",src:t.item.image?t.item.image:zt})),h("div",{className:"mg-upc-dg-item-data"},h("a",{href:t.item.link},t.item.title),t.item.price_html&&h("span",{className:"mg-upc-dg-price",dangerouslySetInnerHTML:{__html:t.item.price_html}}),t.item.stock_html&&h("span",{className:"mg-upc-dg-stock",dangerouslySetInnerHTML:{__html:t.item.stock_html}}),t.editable&&!e&&h("p",null,t.item.description),t.editable&&!e&&Vt(t.list,"editable_item_description")&&h("button",{onClick:()=>{n(!0)}},h("span",{className:"mg-upc-icon upc-font-edit"}),""===i&&h("span",null,mt("Add Comment")),""!==i&&h("span",null,mt("Edit Comment"))),h("input",{ref:r,className:e?"mg-upc-dg-btn-item-desc":"mg-upc-dg-dn",type:"text",value:i,onChange:function(t){o(t.target.value)},onKeyDown:e=>{"Enter"===e.key&&(n(!1),t.onSaveItemDescription(i))},maxLength:400}),t.editable&&e&&h("button",{className:"mg-upc-dg-btn-item-desc-cancel",onClick:()=>{n(!1),o(t.item.description)}},h("span",{className:"mg-upc-icon upc-font-close"}),h("span",null,mt("Cancel"))),t.editable&&e&&h("button",{className:"mg-upc-dg-btn-item-desc-save",onClick:()=>{n(!1),t.onSaveItemDescription(i)}},h("span",{className:"mg-upc-icon upc-font-save"}),h("span",null,mt("Save")))),t.editable&&Vt(t.list,"quantity")&&h("div",{className:"mg-upc-dg-quantity"},h("small",null,mt("Quantity")),h("input",{"aria-label":mt("Quantity"),type:"number",value:s,onChange:function(){a(event.target.value)}})),t.editable&&!e&&h("div",null,h("button",{"aria-label":"Remove item",onClick:t.onRemove},h("span",{className:"mg-upc-icon upc-font-trash"}))))},vn=function(t){return new Promise((function(e,n){const i=document.createElement("script");let o=!1;i.type="text/javascript",i.src=t,i.async=!0,i.onerror=function(t){n(t,i)},i.onload=i.onreadystatechange=function(){o||this.readyState&&"complete"!=this.readyState||(o=!0,setTimeout((function(){e()}),100))},(document.head||document.body||document.documentElement).appendChild(i)}))},yn=function(t){const e=it(null),n=it((e=>{t.onMove(e)}));return nt((()=>{n.current=t.onMove})),nt((()=>{let i=!1;if(Vt(t.list,"sortable")){const t=()=>{i=Sortable.create(e.current,{handle:".mg-upc-dg-item-handle",group:"shared",animation:150,onUpdate:function(t){n.current(t)}})};"undefined"!=typeof Sortable?t():vn(qt()).then((()=>{t()}))}return()=>{i&&i.destroy()}})),h(y,null,h("ul",{className:"mg-upc-dg-list-fake mg-upc-dg-on-loading"},[0,1,2].map((e=>h("li",{className:"mg-upc-dg-item"},Vt(t.list,"sortable")&&h(y,null,h("span",{className:"mg-upc-dg-item-handle-skeleton"},"  ",h(ce,{width:"1.5em"}),"  "),h("span",{className:"mg-upc-dg-item-number-skeleton"},"  ",h(ce,{width:"1em"}),"  ")),Vt(t.list,"vote")&&h(y,null,h("span",{className:"mg-upc-dg-item-number-skeleton"},"  ",h(ce,{width:"1em"}),"  ")),h("div",{className:"mg-upc-dg-item-skeleton-image"},h(ce,{width:"5em",height:"5em"})),h("div",{className:"mg-upc-dg-item-data"},h(ce,{count:2})))))),h("ul",{ref:e,className:"mg-upc-dg-list"},0===t?.items?.length&&h("span",null,"There are no items in this list"),t?.items?.length>0&&t.items?.map&&t.items.map((e=>h(hn,{list:t.list,item:e,editable:t.editable,onRemove:()=>t.onRemove(t.list,e),onSaveItemDescription:n=>t.onSaveItemDescription(t.list,e,n),onSaveItemQuantity:n=>t.onSaveItemQuantity(t.list,e,n),key:e.ID+":"+e.post_id})))),Vt(t.list,"vote")&&h("span",{className:"mg-upc-dg-total-votes"}," ",mt("Total votes:")," ",h("span",null," ",t.list.vote_counter)))},bn=function(t){const e=it(null),n=it(null),i=mt("Copy"),[o,s]=tt(i);nt((()=>{let t=null;o!==i&&(t=setTimeout((()=>{s(i),clearTimeout(t)}),2e3))}),[o]);const a=encodeURIComponent(t.link),r=encodeURIComponent(t.title);let l=[{name:"Twitter",url:"https://twitter.com/share?url="+a+"&text="+r},{name:"Facebook",url:"https://www.facebook.com/sharer/sharer.php?u="+a+"&quote="+r},{name:"Pinterest",url:"https://pinterest.com/pin/create/button/?url="+a+"&description="+r},{name:"Whatsapp",url:"whatsapp://send?text="+a},{name:"Telegram",url:"https://t.me/share/url?url="+a+"&text="+r},{name:"LiNE",url:"https://social-plugins.line.me/lineit/share?url="+a+"&text="+r},{slug:"email",name:mt("Email"),url:"mailto:?subject="+r+"&body="+a}];return void 0!==Qt().shareButtons&&(l=l.filter((t=>Qt().shareButtons.includes(t.slug||t.name.toLowerCase())))),h("div",{className:"mg-upc-dg-share-link"},h("input",{ref:e,value:t.link,onClick:function(){e.current.setSelectionRange(0,e.current.value.length)},readOnly:!0}),h("button",{ref:n,onClick:function(t){var n;(n=e.current).focus(),n.setSelectionRange(0,n.value.length),document.execCommand&&document.execCommand("copy")?s(mt("Copied!")):s("Error!")}},h("span",{className:"mg-upc-icon upc-font-copy"}),h("span",null,o)),l.map((function(t){return(e=t).slug||(e.slug=e.name.toLowerCase()),h("a",{href:e.url,title:"Share with "+e.name,className:"mg-upc-dg-share",target:"_blank",rel:"noopener"},h("div",{className:"mg-upc-share-btn-img mg-upc-share-"+e.slug}," "));var e})))},wn=function(t){const{state:e,dispatch:n}=at(ae),[i,o]=tt(!1),s=it(!1),a=it(!1);function r(t){t<1||t>e.listTotalPages||"loading"===e.status||n(Ne({page:t}))}return nt((()=>{const t=e.list;let i=!1,o=!1;if(t&&Vt(t,"sortable")){const t=()=>{s.current&&e.listPage<e.listTotalPages&&(i=Sortable.create(s.current,{group:"shared",onAdd:t=>{n(Ae(t.oldIndex))}})),s.current&&e.listPage>1&&(o=Sortable.create(a.current,{group:"shared",onAdd:t=>{n(Ee(t.oldIndex))}}))};"undefined"!=typeof Sortable?t():vn(qt()).then((()=>{t()}))}return()=>{i&&i.destroy(),o&&o.destroy()}}),[e.list,e.listPage,e.listTotalPages]),nt((()=>{o(!1)}),[e.editing,e.list,e.addingPost]),h(y,null,e.editing&&h(gn,{list:e.list,addingPost:e.addingPost,onSave:function(t){if(-1===e.list.ID||t.title!==e.list.title||t.content!==e.list.content||t.status!==e.list.status)if(-1===e.list.ID){const i={};i.title=t.title,i.content=t.content,i.type=t.type,i.status=t.status,e.addingPost?.post_id&&(i.adding=e.addingPost.post_id,e.addingPost?.description&&(i.description=e.addingPost.description)),n(Ce(i))}else{const i={id:e.list.ID};t.status!==e.list.status&&(i.status=t.status),t.title!==e.list.title&&(i.title=t.title),t.content!==e.list.content&&(i.content=t.content),n(ke(i))}},onCancel:function(){n(pe(!1)),-1===e.list.ID&&(n(Pe(!1)),n(de()),n(fe()))}}),!e.editing&&h(y,null,h("div",{className:"mg-upc-dg-top-action"},function(t){const e=t.type;return Gt(e,"editable_title")||Gt(e,"editable_content")||Bt(e)?.available_statuses?.length>1}(e.list)&&h("button",{className:"mg-upg-edit",onClick:()=>n(pe(!0))},h("span",{className:"mg-upc-icon upc-font-edit"}),h("span",null,mt("Edit"))),e.list.link&&h("button",{className:"mg-upg-share",onClick:()=>o(!i)},h("span",{className:"mg-upc-icon upc-font-share"}),h("span",null,mt("Share"))),"cart"===e.list.type&&h("button",{className:"mg-upg-share",onClick:function(){n(me(e.list.ID))}},h("span",{className:"mg-upc-icon upc-font-cart"}),h("span",null,mt("Add all to cart")))),i&&e.list.link&&h(bn,{link:e.list.link,title:e.list.title}),e.list.content&&h("p",{className:"mg-upc-dg-list-desc",dangerouslySetInnerHTML:{__html:Yt(e.list.content)}}),h(ce,{count:3}),h(yn,{list:e.list,items:e.list?.items||[],onMove:function(t){n(Te(t.oldIndex,e.list,t.newIndex))},onRemove:function(t,e){n(xe(e.post_id))},onSaveItemDescription:function(t,e,i){n(Ie(e.post_id,{description:i}))},onSaveItemQuantity:function(t,e,i){n(Ie(e.post_id,{quantity:i}))},editable:t.editable})),(!e.editing||!e.list)&&e.listTotalPages>1&&h(ue,{totalPages:e.listTotalPages,page:e.listPage,onPreview:function(){r(e.listPage-1)},onNext:function(){r(e.listPage+1)},prevRef:a,nextRef:s}))};function Pn(t){return parseInt(t.author,10)===parseInt(Qt().user_id,10)}function kn(){"replaceState"in history?(history.replaceState("",document.title,location.pathname),history.go(-1)):location.hash=""}H(h((t=>{const[e,n]=et(ee,se);return h(ae.Provider,{value:{state:e,dispatch:oe(n,(()=>e))}},t.children)}),null,h((function(){const{state:t,dispatch:e}=at(ae),n=ot((()=>Kt(t.addingPost)),[t.addingPost]),i=it(!1);let o="listOfList";o=t.addingPost?t.editing?"addingToNew":"adding":t.editing?-1!==t.list?.ID?"edit":"new":t.list?"list":"listOfList";const s={container:"mg-upc-dg-container",overlay:"mg-upc-dg-overlay",dialog:"mg-upc-dg-content"+(t.errorCode?" mg-upc-err-"+t.errorCode:""),title:"mg-upc-dg-title",closeButton:"mg-upc-dg-close"};nt((()=>{window.showMyLists=function(){a()},window.mgUpcShowList=function(t,n=""){e(de()),e(Pe({ID:t,title:n||""})),i.current.show()},window.addItemToList=function(t,n=!1,o="view"){e(de()),n?(e(Se(n,t,o)),i.current.show()):r(t)},window.removeItemFromList=function(t,n,o="view"){e(de()),e(xe(t,n,o)),i.current.show()},window.mgUpcAddListToCart=Zt}),[i.current,e]);const a=()=>{e(de()),e(fe()),i.current.show()},r=t=>{e(_e({post_id:t})),e(fe({addingPost:t})),i.current.show()};function l(n){n<1||n>t.totalPages||"loading"===t.status||e(ve(n))}const c="list"===o||"new"===o||"edit"===o||"addingToNew"===o;return h(fn,{id:"mg-upc-dg-dialog",dialogRef:function(t){i.current=t},title:t.title,classNames:s,onBack:!!c&&function(){switch(o){case"list":default:a();break;case"new":e(Pe(!1)),e(pe(!1)),a();break;case"edit":e(pe(!1));break;case"addingToNew":e(Pe(!1)),e(pe(!1)),e(fe({addingPost:t.addingPost.post_id}))}}},h("div",{className:"mg-upc-dg-content-wrapper mg-upc-dg-status-"+t.status+" mg-upc-dg-view-"+o},h("div",{className:"mg-upc-dg-wait"}),t.message&&h("div",{className:"mg-upc-dg-msg"},t.message,h("a",{href:"#",className:"mg-upc-dg-alert-close","aria-label":"Hide alert",onClick:t=>{t.preventDefault(),e({type:ht,payload:null})}},h("span",{className:"mg-upc-icon upc-font-close"}))),t.error&&h("div",{className:"mg-upc-dg-error"},t.error,h("a",{href:"#",className:"mg-upc-dg-alert-close","aria-label":"Hide alert",onClick:t=>{t.preventDefault(),e({type:gt,payload:null})}},h("span",{className:"mg-upc-icon upc-font-close"}))),h("div",{className:"mg-upc-dg-body"},!t.error&&t.addingPost&&h(Oe,{item:t.addingPost,onSaveItemDescription:function(n){e(_e({...t.addingPost,description:n}))}}),("listOfList"===o||"adding"===o)&&h(y,null,h("div",{className:"mg-upc-dg-top-action"},n.length>0&&!t.error&&h("button",{className:"mg-list-new",onClick:function(t){e(pe(!0)),e(Pe(!0)),i.current.show()}},h("span",{className:"mg-upc-icon upc-font-add"}),h("span",null,mt("Create List")))),h(De,{lists:t.listOfList,onSelect:function(n){e(pe(!1)),t.addingPost?e(Se(n.ID,t.addingPost,"view")):(e(Pe(n)),i.current.show())},onRemove:!t.addingPost&&function(t){e(he(t.ID))},loadPreview:function(){l(t.page-1)},loadNext:function(){l(t.page+1)}})),t.list&&h(wn,{editable:Pn(t.list)}))))}),null)," "),document.querySelector("body")),"#my-lists"===location.hash&&kn(),window.addEventListener("hashchange",(function(){"#my-lists"===location.hash&&(window.showMyLists(),kn())}),!1),window.mgUpcApiClient=Ft,window.mgUpcListeners=function(){jQuery(".mg-upc-post-add").on("click",(function(){return jQuery(this).data("post-id")>0&&window.addItemToList(jQuery(this).data("post-id"),(jQuery(this).data("upc-list")+"").length>0&&jQuery(this).data("upc-list")),!1})),jQuery(".mg-upc-post-remove").on("click",(function(){return jQuery(this).data("post-id")>0&&void 0!==jQuery(this).data("upc-list")&&window.removeItemFromList(jQuery(this).data("post-id"),(jQuery(this).data("upc-list")+"").length>0&&jQuery(this).data("upc-list")),!1})),jQuery(".mg-upc-show-list").on("click",(function(){return void 0!==jQuery(this).data("upc-list")&&window.mgUpcShowList(jQuery(this).data("upc-list"),(jQuery(this).data("upc-title")+"").length>0&&jQuery(this).data("upc-title")),!1}))},window.mgUpcListeners()})();