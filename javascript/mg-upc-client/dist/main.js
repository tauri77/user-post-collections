(()=>{"use strict";var t,e,n,i,o,s,a={},r=[],l=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(t,e){for(var n in e)t[n]=e[n];return t}function u(t){var e=t.parentNode;e&&e.removeChild(t)}function d(e,n,i){var o,s,a,r={};for(a in n)"key"==a?o=n[a]:"ref"==a?s=n[a]:r[a]=n[a];if(arguments.length>2&&(r.children=arguments.length>3?t.call(arguments,2):i),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===r[a]&&(r[a]=e.defaultProps[a]);return p(e,r,o,s,null)}function p(t,i,o,s,a){var r={type:t,props:i,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==a?++n:a};return null==a&&null!=e.vnode&&e.vnode(r),r}function _(t){return t.children}function m(t,e){this.props=t,this.context=e}function f(t,e){if(null==e)return t.__?f(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?f(t):null}function g(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return g(t)}}function h(t){(!t.__d&&(t.__d=!0)&&i.push(t)&&!v.__r++||o!==e.debounceRendering)&&((o=e.debounceRendering)||setTimeout)(v)}function v(){for(var t;v.__r=i.length;)t=i.sort((function(t,e){return t.__v.__b-e.__v.__b})),i=[],t.some((function(t){var e,n,i,o,s,a;t.__d&&(s=(o=(e=t).__v).__e,(a=e.__P)&&(n=[],(i=c({},o)).__v=o.__v+1,I(a,o,i,e.__n,void 0!==a.ownerSVGElement,null!=o.__h?[s]:null,n,null==s?f(o):s,o.__h),S(n,o),o.__e!=s&&g(o)))}))}function y(t,e,n,i,o,s,l,c,u,d){var m,g,h,v,y,w,N,k=i&&i.__k||r,C=k.length;for(n.__k=[],m=0;m<e.length;m++)if(null!=(v=n.__k[m]=null==(v=e[m])||"boolean"==typeof v?null:"string"==typeof v||"number"==typeof v||"bigint"==typeof v?p(null,v,null,null,v):Array.isArray(v)?p(_,{children:v},null,null,null):v.__b>0?p(v.type,v.props,v.key,null,v.__v):v)){if(v.__=n,v.__b=n.__b+1,null===(h=k[m])||h&&v.key==h.key&&v.type===h.type)k[m]=void 0;else for(g=0;g<C;g++){if((h=k[g])&&v.key==h.key&&v.type===h.type){k[g]=void 0;break}h=null}I(t,v,h=h||a,o,s,l,c,u,d),y=v.__e,(g=v.ref)&&h.ref!=g&&(N||(N=[]),h.ref&&N.push(h.ref,null,v),N.push(g,v.__c||y,v)),null!=y?(null==w&&(w=y),"function"==typeof v.type&&v.__k===h.__k?v.__d=u=b(v,u,t):u=P(t,v,h,k,y,u),"function"==typeof n.type&&(n.__d=u)):u&&h.__e==u&&u.parentNode!=t&&(u=f(h))}for(n.__e=w,m=C;m--;)null!=k[m]&&("function"==typeof n.type&&null!=k[m].__e&&k[m].__e==n.__d&&(n.__d=f(i,m+1)),E(k[m],k[m]));if(N)for(m=0;m<N.length;m++)A(N[m],N[++m],N[++m])}function b(t,e,n){for(var i,o=t.__k,s=0;o&&s<o.length;s++)(i=o[s])&&(i.__=t,e="function"==typeof i.type?b(i,e,n):P(n,i,i,o,i.__e,e));return e}function w(t,e){return e=e||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some((function(t){w(t,e)})):e.push(t)),e}function P(t,e,n,i,o,s){var a,r,l;if(void 0!==e.__d)a=e.__d,e.__d=void 0;else if(null==n||o!=s||null==o.parentNode)t:if(null==s||s.parentNode!==t)t.appendChild(o),a=null;else{for(r=s,l=0;(r=r.nextSibling)&&l<i.length;l+=2)if(r==o)break t;t.insertBefore(o,s),a=s}return void 0!==a?a:o.nextSibling}function N(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||l.test(e)?n:n+"px"}function k(t,e,n,i,o){var s;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||N(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||N(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i||t.addEventListener(e,s?x:C,s):t.removeEventListener(e,s?x:C,s);else if("dangerouslySetInnerHTML"!==e){if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function C(t){this.l[t.type+!1](e.event?e.event(t):t)}function x(t){this.l[t.type+!0](e.event?e.event(t):t)}function I(t,n,i,o,s,a,r,l,u){var d,p,f,g,h,v,b,w,P,N,k,C,x,I=n.type;if(void 0!==n.constructor)return null;null!=i.__h&&(u=i.__h,l=n.__e=i.__e,n.__h=null,a=[l]),(d=e.__b)&&d(n);try{t:if("function"==typeof I){if(w=n.props,P=(d=I.contextType)&&o[d.__c],N=d?P?P.props.value:d.__:o,i.__c?b=(p=n.__c=i.__c).__=p.__E:("prototype"in I&&I.prototype.render?n.__c=p=new I(w,N):(n.__c=p=new m(w,N),p.constructor=I,p.render=L),P&&P.sub(p),p.props=w,p.state||(p.state={}),p.context=N,p.__n=o,f=p.__d=!0,p.__h=[]),null==p.__s&&(p.__s=p.state),null!=I.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=c({},p.__s)),c(p.__s,I.getDerivedStateFromProps(w,p.__s))),g=p.props,h=p.state,f)null==I.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==I.getDerivedStateFromProps&&w!==g&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(w,N),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(w,p.__s,N)||n.__v===i.__v){p.props=w,p.state=p.__s,n.__v!==i.__v&&(p.__d=!1),p.__v=n,n.__e=i.__e,n.__k=i.__k,n.__k.forEach((function(t){t&&(t.__=n)})),p.__h.length&&r.push(p);break t}null!=p.componentWillUpdate&&p.componentWillUpdate(w,p.__s,N),null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(g,h,v)}))}if(p.context=N,p.props=w,p.__v=n,p.__P=t,k=e.__r,C=0,"prototype"in I&&I.prototype.render)p.state=p.__s,p.__d=!1,k&&k(n),d=p.render(p.props,p.state,p.context);else do{p.__d=!1,k&&k(n),d=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++C<25);p.state=p.__s,null!=p.getChildContext&&(o=c(c({},o),p.getChildContext())),f||null==p.getSnapshotBeforeUpdate||(v=p.getSnapshotBeforeUpdate(g,h)),x=null!=d&&d.type===_&&null==d.key?d.props.children:d,y(t,Array.isArray(x)?x:[x],n,i,o,s,a,r,l,u),p.base=n.__e,n.__h=null,p.__h.length&&r.push(p),b&&(p.__E=p.__=null),p.__e=!1}else null==a&&n.__v===i.__v?(n.__k=i.__k,n.__e=i.__e):n.__e=T(i.__e,n,i,o,s,a,r,u);(d=e.diffed)&&d(n)}catch(t){n.__v=null,(u||null!=a)&&(n.__e=l,n.__h=!!u,a[a.indexOf(l)]=null),e.__e(t,n,i)}}function S(t,n){e.__c&&e.__c(n,t),t.some((function(n){try{t=n.__h,n.__h=[],t.some((function(t){t.call(n)}))}catch(t){e.__e(t,n.__v)}}))}function T(e,n,i,o,s,r,l,c){var d,p,_,m=i.props,g=n.props,h=n.type,v=0;if("svg"===h&&(s=!0),null!=r)for(;v<r.length;v++)if((d=r[v])&&"setAttribute"in d==!!h&&(h?d.localName===h:3===d.nodeType)){e=d,r[v]=null;break}if(null==e){if(null===h)return document.createTextNode(g);e=s?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,g.is&&g),r=null,c=!1}if(null===h)m===g||c&&e.data===g||(e.data=g);else{if(r=r&&t.call(e.childNodes),p=(m=i.props||a).dangerouslySetInnerHTML,_=g.dangerouslySetInnerHTML,!c){if(null!=r)for(m={},v=0;v<e.attributes.length;v++)m[e.attributes[v].name]=e.attributes[v].value;(_||p)&&(_&&(p&&_.__html==p.__html||_.__html===e.innerHTML)||(e.innerHTML=_&&_.__html||""))}if(function(t,e,n,i,o){var s;for(s in n)"children"===s||"key"===s||s in e||k(t,s,null,n[s],i);for(s in e)o&&"function"!=typeof e[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===e[s]||k(t,s,e[s],n[s],i)}(e,g,m,s,c),_)n.__k=[];else if(v=n.props.children,y(e,Array.isArray(v)?v:[v],n,i,o,s&&"foreignObject"!==h,r,l,r?r[0]:i.__k&&f(i,0),c),null!=r)for(v=r.length;v--;)null!=r[v]&&u(r[v]);c||("value"in g&&void 0!==(v=g.value)&&(v!==e.value||"progress"===h&&!v||"option"===h&&v!==m.value)&&k(e,"value",v,m.value,!1),"checked"in g&&void 0!==(v=g.checked)&&v!==e.checked&&k(e,"checked",v,m.checked,!1))}return e}function A(t,n,i){try{"function"==typeof t?t(n):t.current=n}catch(t){e.__e(t,i)}}function E(t,n,i){var o,s;if(e.unmount&&e.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||A(o,null,n)),null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){e.__e(t,n)}o.base=o.__P=null}if(o=t.__k)for(s=0;s<o.length;s++)o[s]&&E(o[s],n,"function"!=typeof t.type);i||null==t.__e||u(t.__e),t.__e=t.__d=void 0}function L(t,e,n){return this.constructor(t,n)}function D(n,i,o){var s,r,l;e.__&&e.__(n,i),r=(s="function"==typeof o)?null:o&&o.__k||i.__k,l=[],I(i,n=(!s&&o||i).__k=d(_,null,[n]),r||a,a,void 0!==i.ownerSVGElement,!s&&o?[o]:r?null:i.firstChild?t.call(i.childNodes):null,l,!s&&o?o:r?r.__e:i.firstChild,s),S(l,n)}t=r.slice,e={__e:function(t,e,n,i){for(var o,s,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((s=o.constructor)&&null!=s.getDerivedStateFromError&&(o.setState(s.getDerivedStateFromError(t)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,i||{}),a=o.__d),a)return o.__E=o}catch(e){t=e}throw t}},n=0,m.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof t&&(t=t(c({},n),this.props)),t&&c(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),h(this))},m.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),h(this))},m.prototype.render=_,i=[],v.__r=0,s=0;var O,j,U,R,W=0,H=[],$=[],M=e.__b,F=e.__r,B=e.diffed,Q=e.__c,q=e.unmount;function V(t,n){e.__h&&e.__h(j,t,W||n),W=0;var i=j.__H||(j.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({__V:$}),i.__[t]}function X(t){return W=1,K(st,t)}function K(t,e,n){var i=V(O++,2);if(i.t=t,!i.__c&&(i.__=[n?n(e):st(void 0,e),function(t){var e=i.__N?i.__N[0]:i.__[0],n=i.t(e,t);e!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=j,!i.__c.u)){i.__c.__H.u=!0;var o=i.__c.shouldComponentUpdate;i.__c.shouldComponentUpdate=function(t,e,n){if(!i.__c.__H)return!0;var s=i.__c.__H.__.filter((function(t){return t.__c}));return(s.every((function(t){return!t.__N}))||!s.every((function(t){if(!t.__N)return!0;var e=t.__[0];return t.__=t.__N,t.__N=void 0,e===t.__[0]})))&&(!o||o(t,e,n))}}return i.__N||i.__}function G(t,n){var i=V(O++,3);!e.__s&&ot(i.__H,n)&&(i.__=t,i.i=n,j.__H.__h.push(i))}function z(t){return W=5,J((function(){return{current:t}}),[])}function J(t,e){var n=V(O++,7);return ot(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function Y(t,e){return W=8,J((function(){return t}),e)}function Z(t){var e=j.context[t.__c],n=V(O++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(j)),e.props.value):t.__}function tt(){for(var t;t=H.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(nt),t.__H.__h.forEach(it),t.__H.__h=[]}catch(n){t.__H.__h=[],e.__e(n,t.__v)}}e.__b=function(t){j=null,M&&M(t)},e.__r=function(t){F&&F(t),O=0;var e=(j=t.__c).__H;e&&(U===j?(e.__h=[],j.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.__V=$,t.__N=t.i=void 0}))):(e.__h.forEach(nt),e.__h.forEach(it),e.__h=[])),U=j},e.diffed=function(t){B&&B(t);var n=t.__c;n&&n.__H&&(n.__H.__h.length&&(1!==H.push(n)&&R===e.requestAnimationFrame||((R=e.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(i),et&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,100);et&&(e=requestAnimationFrame(n))})(tt)),n.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.__V!==$&&(t.__=t.__V),t.i=void 0,t.__V=$}))),U=j=null},e.__c=function(t,n){n.some((function(t){try{t.__h.forEach(nt),t.__h=t.__h.filter((function(t){return!t.__||it(t)}))}catch(i){n.some((function(t){t.__h&&(t.__h=[])})),n=[],e.__e(i,t.__v)}})),Q&&Q(t,n)},e.unmount=function(t){q&&q(t);var n,i=t.__c;i&&i.__H&&(i.__H.__.forEach((function(t){try{nt(t)}catch(t){n=t}})),n&&e.__e(n,i.__v))};var et="function"==typeof requestAnimationFrame;function nt(t){var e=j,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),j=e}function it(t){var e=j;t.__c=t.__(),j=e}function ot(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function st(t,e){return"function"==typeof e?e(t):e}const at=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return MgUpcTexts&&MgUpcTexts[t]?e?e.reduce((function(t,e){return t.replace(/%s/,e)}),MgUpcTexts[t]):MgUpcTexts[t]:t},rt="ui/reset",lt="ui/error",ct="ui/message",ut="ui/editing",dt="listOfLists/set",pt="listOfLists/remove",_t="listOfLists/create",mt="listOfList/addingPost",ft="listOfList/setPage",gt="listOfList/setTotalPages",ht="list/set",vt="list/update",yt="list/setPage",bt="list/setTotalPages",wt="list/setItems",Pt="list/removeItem",Nt="list/addItem",kt="list/updateItem",Ct="list/moveItem",xt="list/cart",It=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"mg-upc/v1/lists";if(void 0===Dt().nonce){const t=new FormData;t.append("action","mg_upc_user");const e={method:"POST",credentials:"same-origin",referrerPolicy:"no-referrer",body:t},n=await fetch(Dt().ajaxUrl,e),i=await n.json();i.nonce&&(Dt().nonce=i.nonce),i.user_id&&(Dt().user_id=i.user_id)}const o={method:t,credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":Dt().nonce},referrerPolicy:"no-referrer"};"GET"!==t&&n&&(o.body=JSON.stringify(n));const s=await fetch(Dt().root+i+e,o);s.headers.get("x-wp-nonce")&&(Dt().nonce=s.headers.get("x-wp-nonce"));const a=await s.json();return{data:a,headers:s.headers,status:s.status}};function St(t){const e=Object.entries(t).filter((t=>{let[,e]=t;return null!=e})).map((t=>{let[e,n]=t;return`${encodeURIComponent(e)}=${encodeURIComponent(String(n))}`})),n=-1!==Dt().root.indexOf("?")?"&":"?";return e.length>0?`${n}${e.join("&")}`:""}class Tt extends Error{constructor(t,e){var n;super(t),this.name="MgApiError",this.code=null==e||null===(n=e.data)||void 0===n?void 0:n.code,this.response=e}}function At(t){var e,n;let i=null==t||null===(e=t.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.status;var o;if(!i&&t.status&&(i=t.status),400===i||401===i||403===i||404===i||409===i||500===i)throw new Tt(null==t||null===(o=t.data)||void 0===o?void 0:o.message,t)}let Et={my:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return It("GET","/My"+St(t),{}).then((function(t){return At(t),t}))},discover:function(t){return It("GET","/"+St(t),{}).then((function(t){return At(t),t}))},get:function(t){return It("GET","/"+t,{}).then((function(t){return At(t),t}))},cart:function(t){return It("POST","/cart",{list:t},"mg-upc/v1").then((function(t){return At(t),t}))},items:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return It("GET","/"+t+"/items"+St(e),{}).then((function(t){return At(t),t}))},delete:function(t){return It("DELETE","/"+t,{}).then((function(t){return At(t),t}))},create:function(t){return It("POST","",t).then((function(t){return At(t),t}))},update:function(t){let e=t.id;return delete t.id,It("PATCH","/"+e,t).then((function(t){return At(t),t}))},add:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"object"!=typeof e&&(e={post_id:e}),It("POST","/"+t+"/items"+St(n),e).then((function(t){return At(t),t}))},quit:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return It("DELETE","/"+t+"/items/"+e+St(n),{}).then((function(t){return At(t),t}))},updateItem:function(t,e,n){return It("PATCH","/"+t+"/items/"+e,n).then((function(t){return At(t),t}))},vote:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return It("POST","/"+t+"/items/"+e+"/vote",n).then((function(t){return At(t),t}))},move:function(t,e,n){return It("PATCH","/"+t+"/items/"+e,{position:n}).then((function(t){return At(t),t}))}};const Lt=Et;function Dt(){return MgUserPostCollections}function Ot(){var t;return null===(t=Dt())||void 0===t?void 0:t.sortable}function jt(t){var e;const n=null===(e=Dt())||void 0===e?void 0:e.types;return!(!n||!n[t])&&n[t]}function Ut(t){var e;const n=null===(e=Dt())||void 0===e?void 0:e.statuses;return!(!n||!n[t])&&n[t]}function Rt(t,e){return!!t.type&&Ht(t.type,e)}function Wt(t){var e;const n=[],i=null===(e=Dt())||void 0===e?void 0:e.types;for(const e in i)i.hasOwnProperty(e)&&(Ht(e,"always_exists")||(null!=t&&t.type?i[e].available_post_types.includes(t.type)&&n.push(i[e]):n.push(i[e])));return n}function Ht(t,e){const n=jt(t);return!(!n||!n.supports)&&n.supports.includes(e)}const $t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=";function Mt(t){return JSON.parse(JSON.stringify(t))}function Ft(t){return"string"!=typeof t?"":t.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")}function Bt(t){return Lt.cart(t).then((t=>(jQuery&&t.data.fragments&&t.data.cart_hash&&jQuery(document.body).trigger("added_to_cart",[t.data.fragments,t.data.cart_hash]),t.data)))}function Qt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";if(!jQuery)return!1;const n=jQuery("<div>").addClass("mg-upc-alert mg-upc-alert-"+e);n.append(jQuery("<p>").html(t));const i=jQuery('<a class="mg-upc-alert-close" href="#"><span class="mg-upc-icon upc-font-close"></span></a>').on("click",(function(){return n.remove(),!1}));return n.append(i),n}function qt(t,e){const{type:n,payload:i}=e;let o=!1;const s=t=>(o=a({status:"failed"}),t.error&&(o.error=t.error.message?t.error.message:"",o.errorCode=t.error.code?t.error.code:""),o),a=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o||(o=Mt(t)),e)for(const t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o};let r=function(t,e){const{type:n,payload:i}=e;let o,s;const a=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(s||(s=!1===t?{}:Mt(t)),e)for(const t in e)s[t]=e[t];return s};switch(n){case ht:return!0===i?{ID:-1,title:"",content:"",status:"",type:""}:i;case vt:return i.items=Mt(t.items),i;case _t:return i;case wt:return a({items:i});case"list/addItem/failed":case Nt:return null!=i&&i.list?a(i.list):t;case kt:const e=!!i.item&&i.item;return o=a().items.map((t=>t.post_id===i.post_id?e||Object.assign({},t,i):{...t})),a({items:o});case Pt:if(!t.items||1===t.items.length||!1===i)return t;if(s=a(),o=s.items.filter((t=>t.post_id!==i)),Ht(t.type,"sortable")){const e=parseInt(t.items[0].position,10);o.forEach(((t,n)=>{o[n].position=e+n}))}if(Ht(t.type,"vote")){const e=t.items.find((t=>t.post_id==i));e&&(s.vote_counter=s.vote_counter-e.votes)}return{...s,items:o};case Ct:const n=parseInt(t.items[0].position,10);o=a().items.slice();const r=a().items[i.oldIndex];return o.splice(i.oldIndex,1),o.splice(i.newIndex,0,r),isNaN(n)?(alert("positions error!"),t):(o.forEach(((t,e)=>{o[e].position=n+e})),a({items:o}));default:return t}}(t.list,e),l=function(t,e){const{type:n,payload:i}=e;switch(n){case dt:return i;case Nt:case ht:return!1;case pt:return!1===i?t:Mt(t.filter((t=>t.ID!=i)));default:return t}}(t.listOfList,e);switch(t.list===r&&l===t.listOfList||(o=a({listOfList:l,list:r}),t.addingPost||(o.title=o.list?o.list.title:Gt.title)),n){case"ui/mode":return a({mode:i});case rt:return{...Gt,mode:t.mode};case lt:return a(!1===i?{error:!1,errorCode:!1}:{error:i});case ct:return a(!1===i?{message:!1,errorCode:!1}:{message:i});case xt:const n=a();return i.msg&&(n.message=i.msg),i.err&&(n.error=i.err),n;case ut:return a({editing:i});case mt:return o=a(),o.addingPost=i,i&&(o.title=at("Add to...")),o;case _t:o=a(),o.title=i.title?i.title:Gt.title,o.listTotalPages=1,o.listPage=1,o.addingPost=!1;break;case Nt:if(o=a(),null!=i&&i.list){const t=i.list;o.title=t.title?t.title:Gt.title;const e=null==t?void 0:t.items_page;e&&(o.listTotalPages=e["X-WP-TotalPages"]?e["X-WP-TotalPages"]:1,o.listPage=e["X-WP-Page"]?e["X-WP-Page"]:1)}i.message&&(o.error=i.message,o.status="failed"),o.addingPost=!1;break;case ft:return a({page:i});case gt:return a({totalPages:i});case yt:return a({listPage:i});case bt:return a({listTotalPages:i});case"list/set/loading":return o=a(),o.status="loading",o.listOfList=!1,"object"==typeof i?(o.list=i,i.title&&(o.title=i.title)):o.list={ID:i},o;case"list/removeItem/loading":return o=a({status:"loading"}),"object"==typeof i&&i.list_id&&(o.list={ID:i.list_id}),o;case"listOfLists/set/loading":case"list/setItems/loading":case"list/updateItem/loading":case"list/addItem/loading":case"list/moveItemNext/loading":case"list/moveItemPrev/loading":case"list/update/loading":case _t+"/loading":case"list/cart/loading":return a({status:"loading"});case"list/addItem/succeeded":return o=a(),o.addingPost=!1,o.status="succeeded",o.error=!1,o.errorCode=!1,o.title=o.list?o.list.title:Gt.title,o;case"list/cart/succeeded":return a({status:"succeeded",errorCode:!1});case"list/set/succeeded":if(!1===t.list)break;return a({status:"succeeded",error:!1,errorCode:!1});case"listOfLists/set/succeeded":case"list/setItems/succeeded":case"list/updateItem/succeeded":case"list/removeItem/succeeded":case"list/moveItem/succeeded":case"list/moveItemNext/succeeded":case"list/moveItemPrev/succeeded":case"list/update/succeeded":case _t+"/succeeded":return a({status:"succeeded",error:!1,errorCode:!1});case _t+"/failed":return o=a({status:"failed"}),e.error&&e.error.message&&(o.error=e.error.message),o;case"list/addItem/failed":if(o=a(),o.addingPost=!1,o.title=o.list?o.list.title:Gt.title,null!=i&&i.list){const t=i.list;o.title=t.title?t.title:Gt.title;const e=null==t?void 0:t.items_page;e&&(o.listTotalPages=e["X-WP-TotalPages"]?e["X-WP-TotalPages"]:1,o.listPage=e["X-WP-Page"]?e["X-WP-Page"]:1)}return i.message&&(o.error=i.message,o.status="failed"),s(e);case"listOfLists/set/failed":case"list/setItems/failed":case"list/updateItem/failed":case"list/removeItem/failed":case"list/moveItem/failed":case"list/moveItemNext/failed":case"list/moveItemPrev/failed":case"list/update/failed":case"list/set/failed":case"list/cart/failed":return s(e)}return!1!==o?o:t}const Vt=(t,e)=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return{asyncThunk:!0,payload:e,type:t,arg:n,extra:o}};class Xt extends Error{constructor(t,e){super(t),this.name="MgUpcRejectWithValue",this.value=e}}const Kt=(t,e)=>n=>{let i;if((o=n)&&"object"==typeof o&&!0===o.asyncThunk){let o={dispatch:Kt(t,e),getState:e,extra:n.extra,rejectWithValue:t=>new Xt(n.type+": rejectWithValue",t)};t({type:n.type+"/loading",payload:n.arg}),i=n.payload(n.arg,o)}else{if(!(t=>!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then)(n.payload))return void t(n);t({type:n.type+"/loading"}),i=n.payload}var o;i.then((e=>{e instanceof Xt?t({type:n.type+"/failed",payload:e.value}):(t({type:n.type,payload:e}),t({type:n.type+"/succeeded"}))})).catch((e=>{t(e instanceof Xt?{type:n.type+"/failed",payload:e.value}:{type:n.type+"/failed",error:e})}))},Gt={list:!1,listOfList:!1,addingPost:null,status:"idle",error:null,message:null,errorCode:null,editing:!1,title:at("My Lists"),actualAction:"init",page:1,totalPages:1,listPage:1,listTotalPages:1,mode:"my"},zt=function(t,e){var n={__c:e="__cC"+s++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,i;return this.getChildContext||(n=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(h)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}({});function Jt(t){return new Date(t).toLocaleDateString()}const Yt=function(t){const{state:e,dispatch:n}=Z(zt);return d("li",{className:"mg-upc-dg-item-list",onClick:t.onClick,onKeyPress:e=>{13===e.keyCode&&t.onClick(e)},tabIndex:"0"},d("i",{className:"mg-upc-icon mg-upc-dg-item-type mg-upc-dg-item-type-"+t.list.type}),d("div",{className:"mg-upc-dg-item-title"},d("span",null,t.list.title),"my"!==e.mode&&d(_,null,d("span",null,d("a",{href:"#",onClick:function(e){!function(t){t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault()}(e),function(t,e){const n=new URLSearchParams(document.location.hash.substring(1));n.set("author",e);let i=n.toString();""!==i&&(i="#"+i),window.location.hash=i}(0,t.list.author)}},t.list.user_login),d("span",{className:"mg-upc-list-dates"},d("i",null," ",d("b",null,"Created:")," ",Jt(t.list.created)),d("i",null," ",d("b",null,"Modified:")," ",Jt(t.list.modified)))))),d("span",{className:"mg-upc-dg-item-count"},t.list.count),d("span",{className:"mg-upc-dg-item-actions"},t.onRemove&&d("button",{"aria-label":at("Remove List"),onClick:e=>{e.stopPropagation(),t.onRemove(t.list)}},d("span",{className:"mg-upc-icon upc-font-trash"}))))};class Zt extends m{render(){const t=[];for(let e=0;e<this.props.count;e++){let n=this.props.styles?this.props.styles:{};null!=this.props.width&&(n.width=this.props.width),null!=this.props.height&&(n.height=this.props.height),null!==this.props.width&&null!==this.props.height&&this.props.circle&&(n.borderRadius="50%"),t.push(d("span",{key:e,className:"mg-upc-dg-loading-skeleton",style:n},"‌"))}const e=this.props.wrapper;return d("span",null,e?t.map(((t,n)=>d(e,{key:n},t,"‌"))):t)}}var te,ee,ne;ne={count:1,duration:1.2,width:null,wrapper:null,height:null,circle:!1},(ee="defaultProps")in(te=Zt)?Object.defineProperty(te,ee,{value:ne,enumerable:!0,configurable:!0,writable:!0}):te[ee]=ne;const ie=function(t){return d("div",{className:"mg-upc-dg-pagination-div"},d("button",{className:1===t.page?"mg-upc-dg-hidden mg-upc-dg-pagination":"mg-upc-dg-pagination",ref:t.prevRef,disabled:1===t.page,"aria-label":at("Previous page"),title:at("Previous page"),onClick:t.onPreview},d("span",{className:"mg-upc-icon upc-font-arrow_left"})),d("span",{className:t.totalPages>1?"mg-upc-dg-pagination-current":"mg-upc-dg-hidden mg-upc-dg-pagination-current"},t.page),d("button",{className:t.page>=t.totalPages?"mg-upc-dg-hidden mg-upc-dg-pagination":"mg-upc-dg-pagination",ref:t.nextRef,disabled:t.page>=t.totalPages,"aria-label":at("Next page"),title:at("Next page"),onClick:t.onNext},d("span",{className:"mg-upc-icon upc-font-arrow_right"})))},oe=()=>({type:rt,payload:null}),se=t=>({type:mt,payload:t}),ae=t=>({type:ut,payload:t}),re=Vt(xt,(async function(t,e){return await Bt(t)})),le=Vt(dt,(async function(t,e){var n;const i=null===(n=t)||void 0===n?void 0:n.addingPost;return null===t&&(t={}),t.addingPost?t.adding=t.addingPost:(t.adding="",delete t.adding),await Lt.my(t).then((t=>ce(t,e,i)))}));function ce(t,e,n){if(t.headers.get("x-wp-page")&&(e.dispatch(de(parseInt(t.headers.get("x-wp-page"),10))),e.dispatch(pe(parseInt(t.headers.get("X-WP-TotalPages"),10)))),n&&t.headers.get("X-WP-Post-Type")){const i={post_id:n},o={"X-WP-Post-Type":"type","X-WP-Post-Title":"title","X-WP-Post-Image":"image"};for(const e in o){const n=t.headers.get(e);n&&(i[o[e]]=decodeURIComponent(n))}e.dispatch(se(i))}return t.data}Vt(dt,(async function(t,e){return null===t&&(t={}),await Lt.discover(t).then((t=>ce(t,e,!1)))}));const ue=Vt(pt,(async function(t,e){return await Lt.delete(t).then((n=>{if(1===e.getState().listOfList.length){const n=e.getState().page,i=e.getState().totalPages;if(n<i)e.dispatch(le({page:n}));else{if(!(n>1&&n===i))return t;e.dispatch(le({page:n-1}))}return!1}return t}))})),de=t=>({type:ft,payload:t}),pe=t=>({type:gt,payload:t}),_e=t=>({type:yt,payload:t}),me=t=>({type:bt,payload:t}),fe=Vt(ht,(async function(t,e){return!1===t||!0===t?t:await Lt.get("object"==typeof t?t.ID:t).then((t=>(Ce(t,e.dispatch),t.data)))})),ge=Vt(vt,(async function(t,e){return await Lt.update(t).then((t=>(e.dispatch(ae(!1)),Ce(t,e.dispatch),t.data)))})),he=Vt(_t,(async function(t,e){return null===t&&(t={}),t.adding&&t.adding!==e.getState().addingPost&&e.dispatch(se({id:t.addingPost})),await Lt.create(t).then((t=>(e.dispatch(ae(!1)),Ce(t,e.dispatch),t.data)))})),ve=Vt(wt,(async function(t,e){return await Lt.items(e.getState().list.ID,t).then((t=>(Ce(t,e.dispatch),t.data)))})),ye=Vt(Pt,(async function(t,e){const n=e.getState();var i=e.extra.length>0?e.extra[0]:n.list.ID;const o=e.extra.length>1?e.extra[1]:"view";return await Lt.quit(i,t,{context:o}).then((s=>{if(s.data&&s.data.list_id,n.list&&n.list.ID){if(1===n.list.items.length){if(e.dispatch(ve({page})),n.list&&"view"===o){const t=n.listPage,i=n.listTotalPages;t<i?e.dispatch(ve({page:t})):t===i&&e.dispatch(ve({page:Math.max(1,t-1)}))}return!1}}else e.dispatch(fe({ID:i}));return t}))})),be=Vt(Nt,(async function(t,e){let n=e.extra[0],i=!1;try{await Lt.add(t,n,{context:e.extra.length>1?e.extra[1]:"view"}).then((t=>{i=t.data}))}catch(t){var o;const n=null==t||null===(o=t.response)||void 0===o?void 0:o.data;i=e.rejectWithValue(n)}return i})),we=Vt(kt,(async function(t,e){const n=e.extra[0];return await Lt.updateItem(e.getState().list.ID,t,n).then((e=>{var i;return{...n,post_id:t,item:null==e||null===(i=e.data)||void 0===i?void 0:i.item}}))})),Pe=Vt(Ct,(async function(t,e){const n=e.extra[0],i=e.extra[1],o=n.items[t],s=o.position-t+i;return await Lt.move(n.ID,o.post_id,s).then((e=>({oldIndex:t,newIndex:i})))})),Ne=Vt("list/moveItemNext",(async function(t,e){const n=e.getState().list,i=parseInt(n.items[n.items.length-1].position,10);if(isNaN(i))throw alert("positions error!"),"positions error!";const o=n.items[t];return await Lt.move(n.ID,o.post_id,i+1),await e.dispatch(ve({page:e.getState().listPage})),t})),ke=Vt("list/moveItemPrev",(async function(t,e){const n=e.getState().list,i=parseInt(n.items[0].position,10);if(isNaN(i))throw alert("positions error!"),"positions error!";const o=n.items[t];return await Lt.move(n.ID,o.post_id,i-1),await e.dispatch(ve({page:e.getState().listPage})),t}));function Ce(t,e){!t.data.items_page&&t.headers.get("x-wp-page")?(e(_e(parseInt(t.headers.get("x-wp-page"),10))),e(me(parseInt(t.headers.get("X-WP-TotalPages"),10)))):t.data.items_page&&(e(_e(parseInt(t.data.items_page["X-WP-Page"],10))),e(me(parseInt(t.data.items_page["X-WP-TotalPages"],10))))}const xe=function(t){const{state:e,dispatch:n}=Z(zt);return d(_,null,d("ul",{className:"mg-upc-dg-list-of-lists-fake mg-upc-dg-on-loading"},[0,1,2].map((t=>d("li",{className:"mg-upc-dg-item-list"},d("div",null,d(Zt,{width:"1.5em",height:"1.5em"})),d("div",{className:"mg-upc-dg-item-title"},d(Zt,null)),d("div",{className:"mg-upc-dg-item-count"},d(Zt,null)))))),d("ul",{className:"mg-upc-dg-list-of-lists"},t.lists&&t.lists.map((e=>d(Yt,{list:e,onClick:()=>t.onSelect(e),onRemove:t.onRemove,key:e.ID})))),e.totalPages>1&&d(ie,{totalPages:e.totalPages,page:e.page,onPreview:t.loadPreview,onNext:t.loadNext}))},Ie=function(t){var e,n,i;const[o,s]=X(!1),[a,r]=X(""),l=z({});G((()=>{r(t.item.description)}),[t.item]),G((()=>{o&&l.current.focus()}),[o]);const c=()=>"string"==typeof a&&a.length>0;return d(_,null,d("span",null,d("br",null),"Adding item:"),d("div",{className:"mg-upc-dg-item mg-upc-dg-item-adding","data-post_id":t.item.post_id},d("span",{className:"mg-upc-icon upc-font-add"}),d("span",null," "),d("img",{className:"mg-upc-dg-item-image",src:t.item.image?t.item.image:$t}),d("div",{className:"mg-upc-dg-item-data"},d("a",{href:null===(e=t.item)||void 0===e?void 0:e.link},null===(n=t.item)||void 0===n?void 0:n.title),!o&&d("p",null,null===(i=t.item)||void 0===i?void 0:i.description),!o&&d("button",{onClick:()=>{s(!0)}},c()&&d("span",null,at("Edit Comment")),!c()&&d("span",null,at("Add Comment"))),d("input",{ref:l,className:o?"mg-upc-dg-btn-item-desc":"mg-upc-dg-dn",type:"text",value:a,onChange:function(t){r(t.target.value)},maxLength:400}),o&&d("button",{className:"mg-upc-dg-btn-item-desc-cancel",onClick:()=>{s(!1),r(t.item.description)}},d("span",{className:"mg-upc-icon upc-font-close"}),d("span",null,at("Cancel"))),o&&d("button",{className:"mg-upc-dg-btn-item-desc-save",onClick:()=>{s(!1),t.onSaveItemDescription(a)}},d("span",{className:"mg-upc-icon upc-font-save"}),d("span",null,at("Save"))))),d("span",null,at("Select where the item will be added:")))};function Se(){return Se=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Se.apply(this,arguments)}function Te(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var i in e)if("__source"!==i&&t[i]!==e[i])return!0;return!1}function Ae(t){this.props=t}(Ae.prototype=new m).isPureReactComponent=!0,Ae.prototype.shouldComponentUpdate=function(t,e){return Te(this.props,t)||Te(this.state,e)};var Ee=e.__b;e.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),Ee&&Ee(t)},"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref");var Le=e.__e;e.__e=function(t,e,n,i){if(t.then)for(var o,s=e;s=s.__;)if((o=s.__c)&&o.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),o.__c(t,e);Le(t,e,n,i)};var De=e.unmount;function Oe(){this.__u=0,this.t=null,this.__b=null}function je(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Ue(){this.u=null,this.o=null}e.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&!0===t.__h&&(t.type=null),De&&De(t)},(Oe.prototype=new m).__c=function(t,e){var n=e.__c,i=this;null==i.t&&(i.t=[]),i.t.push(n);var o=je(i.__v),s=!1,a=function(){s||(s=!0,n.__R=null,o?o(r):r())};n.__R=a;var r=function(){if(!--i.__u){if(i.state.__a){var t=i.state.__a;i.__v.__k[0]=function t(e,n,i){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return t(e,n,i)})),e.__c&&e.__c.__P===n&&(e.__e&&i.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=i)),e}(t,t.__c.__P,t.__c.__O)}var e;for(i.setState({__a:i.__b=null});e=i.t.pop();)e.forceUpdate()}},l=!0===e.__h;i.__u++||l||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(a,a)},Oe.prototype.componentWillUnmount=function(){this.t=[]},Oe.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=function t(e,n,i){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),e.__c.__H=null),null!=(e=function(t,e){for(var n in e)t[n]=e[n];return t}({},e)).__c&&(e.__c.__P===i&&(e.__c.__P=n),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return t(e,n,i)}))),e}(this.__b,n,i.__O=i.__P)}this.__b=null}var o=e.__a&&d(_,null,t.fallback);return o&&(o.__h=null),[d(_,null,e.__a?null:t.children),o]};var Re=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function We(t){return this.getChildContext=function(){return t.context},t.children}function He(t){var e=this,n=t.i;e.componentWillUnmount=function(){D(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(t){this.childNodes.push(t),e.i.appendChild(t)},insertBefore:function(t,n){this.childNodes.push(t),e.i.appendChild(t)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.i.removeChild(t)}}),D(d(We,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}(Ue.prototype=new m).__a=function(t){var e=this,n=je(e.__v),i=e.o.get(t);return i[0]++,function(o){var s=function(){e.props.revealOrder?(i.push(o),Re(e,t,i)):o()};n?n(s):s()}},Ue.prototype.render=function(t){this.u=null,this.o=new Map;var e=w(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},Ue.prototype.componentDidUpdate=Ue.prototype.componentDidMount=function(){var t=this;this.o.forEach((function(e,n){Re(t,n,e)}))};var $e="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Me=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Fe="undefined"!=typeof document,Be=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(t)};m.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(m.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var Qe=e.event;function qe(){}function Ve(){return this.cancelBubble}function Xe(){return this.defaultPrevented}e.event=function(t){return Qe&&(t=Qe(t)),t.persist=qe,t.isPropagationStopped=Ve,t.isDefaultPrevented=Xe,t.nativeEvent=t};var Ke={configurable:!0,get:function(){return this.class}},Ge=e.vnode;e.vnode=function(t){var e=t.type,n=t.props,i=n;if("string"==typeof e){var o=-1===e.indexOf("-");for(var s in i={},n){var a=n[s];Fe&&"children"===s&&"noscript"===e||"value"===s&&"defaultValue"in n&&null==a||("defaultValue"===s&&"value"in n&&null==n.value?s="value":"download"===s&&!0===a?a="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!Be(n.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():o&&Me.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===a&&(a=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),i[s]&&(s="oninputCapture")),i[s]=a)}"select"==e&&i.multiple&&Array.isArray(i.value)&&(i.value=w(n.children).forEach((function(t){t.props.selected=-1!=i.value.indexOf(t.props.value)}))),"select"==e&&null!=i.defaultValue&&(i.value=w(n.children).forEach((function(t){t.props.selected=i.multiple?-1!=i.defaultValue.indexOf(t.props.value):i.defaultValue==t.props.value}))),t.props=i,n.class!=n.className&&(Ke.enumerable="className"in n,null!=n.className&&(i.class=n.className),Object.defineProperty(i,"className",Ke))}t.$$typeof=$e,Ge&&Ge(t)};var ze=e.__r;e.__r=function(t){ze&&ze(t),t.__c};var Je=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'];function Ye(t){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=t,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}function Ze(t,e){return n=(e||document).querySelectorAll(t),Array.prototype.slice.call(n);var n}function tn(t){(t.querySelector("[autofocus]")||t).focus()}function en(){Ze("[data-a11y-dialog]").forEach((function(t){new Ye(t)}))}Ye.prototype.create=function(){return this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=Ze('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach(function(t){t.addEventListener("click",this._show)}.bind(this)),this._closers=Ze("[data-a11y-dialog-hide]",this.$el).concat(Ze('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach(function(t){t.addEventListener("click",this._hide)}.bind(this)),this._fire("create"),this},Ye.prototype.show=function(t){return this.shown||(this._previouslyFocused=document.activeElement,this.$el.removeAttribute("aria-hidden"),this.shown=!0,tn(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",t)),this},Ye.prototype.hide=function(t){return this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",t),this):this},Ye.prototype.destroy=function(){return this.hide(),this._openers.forEach(function(t){t.removeEventListener("click",this._show)}.bind(this)),this._closers.forEach(function(t){t.removeEventListener("click",this._hide)}.bind(this)),this._fire("destroy"),this._listeners={},this},Ye.prototype.on=function(t,e){return void 0===this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].push(e),this},Ye.prototype.off=function(t,e){var n=(this._listeners[t]||[]).indexOf(e);return n>-1&&this._listeners[t].splice(n,1),this},Ye.prototype._fire=function(t,e){var n=this._listeners[t]||[],i=new CustomEvent(t,{detail:e});this.$el.dispatchEvent(i),n.forEach(function(t){t(this.$el,e)}.bind(this))},Ye.prototype._bindKeypress=function(t){this.$el.contains(document.activeElement)&&(this.shown&&"Escape"===t.key&&"alertdialog"!==this.$el.getAttribute("role")&&(t.preventDefault(),this.hide(t)),this.shown&&"Tab"===t.key&&function(t,e){var n=function(t){return Ze(Je.join(","),t).filter((function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}))}(t),i=n.indexOf(document.activeElement);e.shiftKey&&0===i?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||i!==n.length-1||(n[0].focus(),e.preventDefault())}(this.$el,t))},Ye.prototype._maintainFocus=function(t){!this.shown||t.target.closest('[aria-modal="true"]')||t.target.closest("[data-a11y-dialog-ignore-focus-trap]")||tn(this.$el)},"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",en):window.requestAnimationFrame?window.requestAnimationFrame(en):window.setTimeout(en,16));const nn=t=>{const e=(()=>{const[t,e]=X(!1);return G((()=>e(!0)),[]),t})(),[n,i]=(t=>{const[e,n]=(()=>{const[t,e]=X(null);return[t,Y((t=>{null!==t&&e(new Ye(t))}),[])]})(),i=Y((()=>e.hide()),[e]),o=t.role||"dialog",s="alertdialog"===o,a=t.titleId||t.id+"-title";return G((()=>()=>{e&&e.destroy()}),[e]),[e,{container:{id:t.id,ref:n,role:o,tabIndex:-1,"aria-modal":!0,"aria-hidden":!0,"aria-labelledby":a},overlay:{onClick:s?void 0:i},dialog:{role:"document"},closeButton:{type:"button",onClick:i},title:{role:"heading","aria-level":1,id:a}}]})(t),{dialogRef:o}=t;if(G((()=>(n&&o(n),()=>o(void 0))),[o,n]),!e)return null;const s=t.dialogRoot?document.querySelector(t.dialogRoot):document.body,a=d("h2",Se({},i.title,{className:t.classNames.title,key:"title"}),t.onBack&&d("a",{"aria-label":t.backButtonLabel,href:"#",onClick:e=>{e.preventDefault(),t.onBack(e)}},"←")," ",t.title),r=d("button",Se({},i.closeButton,{className:t.classNames.closeButton,"aria-label":t.closeButtonLabel,key:"button"}),t.closeButtonContent),l=["first"===t.closeButtonPosition&&r,a,t.children,"last"===t.closeButtonPosition&&r].filter(Boolean);return function(t,e){var n=d(He,{__v:t,i:e});return n.containerInfo=e,n}(d("div",Se({},i.container,{className:t.classNames.container}),d("div",Se({},i.overlay,{className:t.classNames.overlay})),d("div",Se({},i.dialog,{className:t.classNames.dialog}),l)),s)};nn.defaultProps={role:"dialog",closeButtonLabel:"Close this dialog window",closeButtonContent:"×",closeButtonPosition:"first",classNames:{},backButtonLabel:"Back",dialogRef:()=>{}},function(t){function e(e,i,o,s){const a=o||s.parent(),r=a.find(".mg-upc-item-vote").attr("disabled",!0);mgUpcApiClient.vote(e,i,{context:"web",posts:n(a)}).then((function(e){t(document.body).trigger("mg_upc_vote_response",[e,a])})).catch((function(t){var e,n;r.attr("disabled",!1),null!==(e=t.response)&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.message&&(s?s.append(Qt(t.response.data.message)):a.before(Qt(t.response.data.message)))}))}function n(e){return[...e.children().map((function(){return t(this).data("pid")}))].join(",")}t(".mg-upc-item-vote").on("click",(function(){const n=t(this).data("vote").split(",");return 2===n.length&&e(n[0],n[1],!1,t(this).closest(".mg-upc-item")),!1})),t((function(){t(".mg-upc-vote").each((function(){const n=t(this);e(n.data("id"),0,n.find(".mg-upc-items-container"),!1)}))})),t(document.body).on("mg_upc_vote_response",(function(e,n,i){if(!n.data)return;const o=parseInt(n.data.vote_counter,10),s=i.find(".mg-upc-item-vote");i.data("votes",o),n.data.can_vote?s.attr("disabled",!1).show():s.animate({width:0,padding:0,opacity:0},200,(function(){s.remove()})),n.data.posts.forEach((function(e){const n=i.find(".mg-upc-item[data-pid="+e.post_id+"]"),s=parseInt(e.votes,10);t(document.body).trigger("mg_upc_item_vote_set",[n,s,o])}))})),t(document.body).on("mg_upc_item_vote_set",(function(t,e,n,i){const o=i>0?Math.round(1e3*n/i)/10:0,s=e.find(".mg-upc-votes");s.find(".mg-upc-item-votes-number").html(n),s.find(".mg-upc-item-percent").html(o+"%"),s.find(".mg-upc-item-bar-progress").animate({width:o+"%"}),s.show()}))}(jQuery),function(t){t(".mg-upc-add-product-to-list").on("click",(function(){let e=t(this).data("id");const n=t(this).closest(".product,.summary").find("[name='variation_id']");return n.length>0&&parseInt(n.val(),10)>0&&(e=n.val()),window.addItemToList(e),!1}));const e="mg-upc-btn-loading",n="mg-upc-product-added",i="mg-upc-product-error",o="Sorry, an error occurred.";function s(a,r,l){if(r.hasClass(e))return!1;let c={product_id:r.data("product"),quantity:r.data("quantity")};if("0"==c.quantity){if(!l)return!!confirm(at("The quantity is zero! Do you want to add a unit?"))&&s(a,r,!0);c.quantity=1}t(document.body).trigger("adding_to_cart",[r,c]);const u=woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart");return t.ajax({type:"POST",url:u,data:c,beforeSend:function(t){r.removeClass(n+" "+i).addClass(e)},success:function(i){r.removeClass(e),i&&(i.error&&i.product_url?alert(o):(r.addClass(n),t(document.body).trigger("added_to_cart",[i.fragments,i.cart_hash,r])))},error:function(){r.addClass(i).removeClass(e),alert(o)}}),!1}function s(a,r,l){if(r.hasClass(e))return!1;let c={product_id:r.data("product"),quantity:r.data("quantity")};if("0"==c.quantity){if(!l)return!!confirm(at("The quantity is zero! Do you want to add a unit?"))&&s(a,r,!0);c.quantity=1}t(document.body).trigger("adding_to_cart",[r,c]);const u=woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart");return t.ajax({type:"POST",url:u,data:c,beforeSend:function(t){r.removeClass(n+" "+i).addClass(e)},success:function(i){r.removeClass(e),i&&(i.error&&i.product_url?alert(o):(r.addClass(n),t(document.body).trigger("added_to_cart",[i.fragments,i.cart_hash,r])))},error:function(){r.addClass(i).removeClass(e),alert(o)}}),!1}t((function(){if("undefined"==typeof wc_add_to_cart_params)return!1;t(".mg-upc-item-product").removeClass("mg-upc-hide").on("click",(function(e){return s(e,t(this),!1)})),t(".mg-upc-add-list-to-cart").removeClass("mg-upc-hide").on("click",(function(s){const a=t(this);return a.hasClass(e)||(a.removeClass(n+" "+i).addClass(e),window.mgUpcAddListToCart(t(this).data("id")).then((function(i){a.removeClass(e),i.err&&a.before(Qt(Ft(i.err))),i.msg&&a.before(Qt(Ft(i.msg),"success")),a.addClass(n),t(document.body).trigger("added_to_cart",[i.fragments,i.cart_hash,a])})).catch((t=>{var n,i;a.removeClass(e),null!==(n=t.response)&&void 0!==n&&null!==(i=n.data)&&void 0!==i&&i.message?a.before(Qt(Ft(t.response.data.message))):alert(o)}))),!1}))}))}(jQuery);const on=function(t){var e;const[n,i]=X(""),[o,s]=X(""),[a,r]=X(""),[l,c]=X(""),u=J((()=>Wt(t.addingPost)),[t.addingPost]);function p(t){t.default_title&&i(t.default_title),t.default_status&&c(t.default_status),r(t.name)}return""===a&&1===u.length&&p(u[0]),G((()=>{i(t.list.title),s(t.list.content),r(t.list.type),c(t.list.status)}),[t.list]),G((()=>{var t;null!==(t=jt(a))&&void 0!==t&&t.available_statuses&&-1===jt(a).available_statuses.indexOf(l)&&c(jt(a).available_statuses[0])}),[a]),d("div",{className:"mg-list-edit"},-1===t.list.ID&&""===a&&d(_,null,d("label",null,at("Select a list type:")),d("ul",{id:`type-${t.list.ID}`},u.map(((t,e)=>d("li",{className:"mg-upc-dg-item-list-type",key:t.name,onClick:()=>p(t),onKeyPress:e=>{13===e.keyCode&&p(t)},tabIndex:"0"},d("i",{className:"mg-upc-icon mg-upc-dg-item-type mg-upc-dg-item-type-"+t.name}),d("div",{className:"mg-upc-dg-item-title"},d("strong",null,t.label),d("div",{className:"mg-upc-dg-item-desc"},t.description))))))),""!==a&&Ht(a,"editable_title")&&d(_,null,d("label",{htmlFor:`title-${t.list.ID}`},at("Title")),d("input",{id:`title-${t.list.ID}`,type:"text",value:n,onChange:function(t){i(t.target.value)},maxLength:100})),""!==a&&Ht(a,"editable_content")&&d(_,null,d("label",{htmlFor:`content-${t.list.ID}`},at("Description")),d("textarea",{id:`content-${t.list.ID}`,value:o,onChange:function(t){s(t.target.value)},maxLength:500}),d("span",{className:"mg-upc-dg-list-desc-edit-count"},d("i",null,null==o?void 0:o.length),"/500")),""!==a&&!jt(a)&&d("span",null,at("Unknown List Type...")),""!==a&&(null===(e=jt(a))||void 0===e?void 0:e.available_statuses)&&jt(a).available_statuses.length>1&&d(_,null,d("label",{htmlFor:`status-${t.list.ID}`},at("Status")),d("select",{id:`status-${t.list.ID}`,value:l,onChange:function(t){c(t.target.value)}},jt(a).available_statuses.map(((t,e)=>{if(function(t){const e=Ut(t);return e&&e.show_in_status_list}(t))return d("option",{value:t},function(t){const e=Ut(t);return e?e.label:t}(t))})))),""!==a&&jt(a)&&d("div",{className:"mg-upc-dg-edit-actions"},d("button",{onClick:()=>t.onSave({title:n,content:o,type:a,status:l})},d("span",{className:"mg-upc-icon upc-font-save"}),d("span",null,at("Save"))),d("button",{onClick:()=>t.onCancel()},d("span",{className:"mg-upc-icon upc-font-close"}),d("span",null,at("Cancel")))))},sn=function(t){var e;const[n,i]=X(!1),[o,s]=X(""),[a,r]=X(null===(e=t.item)||void 0===e?void 0:e.quantity),l=z({});G((()=>{s(t.item.description)}),[t.item]),G((()=>{n&&l.current.focus()}),[n]);const c=z(!1);return G((()=>{t.item.quantity!==a&&(clearTimeout(c.current),c.current=setTimeout((function(){t.onSaveItemQuantity(a)}),600))}),[a]),d("li",{className:"mg-upc-dg-item","data-post_id":t.item.post_id},Rt(t.list,"sortable")&&d(_,null,d("span",{className:"mg-upc-dg-item-handle","aria-draggable":!0},"::"),d("span",{className:"mg-upc-dg-item-number"},t.item.position)),Rt(t.list,"vote")&&d(_,null,d("span",{className:"mg-upc-dg-item-number"},(()=>{const e=parseInt(t.list.vote_counter,10);return Rt(t.list,"vote")&&e>0?Math.round(100*parseInt(t.item.votes,10)/e)+"%":"0%"})())),d("a",{href:t.item.link},d("img",{className:"mg-upc-dg-item-image",src:t.item.image?t.item.image:$t})),d("div",{className:"mg-upc-dg-item-data"},d("a",{href:t.item.link},t.item.title),t.item.price_html&&d("span",{className:"mg-upc-dg-price",dangerouslySetInnerHTML:{__html:t.item.price_html}}),t.item.stock_html&&d("span",{className:"mg-upc-dg-stock",dangerouslySetInnerHTML:{__html:t.item.stock_html}}),t.editable&&!n&&d("p",null,t.item.description),t.editable&&!n&&Rt(t.list,"editable_item_description")&&d("button",{onClick:()=>{i(!0)}},d("span",{className:"mg-upc-icon upc-font-edit"}),""===o&&d("span",null,at("Add Comment")),""!==o&&d("span",null,at("Edit Comment"))),d("input",{ref:l,className:n?"mg-upc-dg-btn-item-desc":"mg-upc-dg-dn",type:"text",value:o,onChange:function(t){s(t.target.value)},maxLength:400}),t.editable&&n&&d("button",{className:"mg-upc-dg-btn-item-desc-cancel",onClick:()=>{i(!1),s(t.item.description)}},d("span",{className:"mg-upc-icon upc-font-close"}),d("span",null,at("Cancel"))),t.editable&&n&&d("button",{className:"mg-upc-dg-btn-item-desc-save",onClick:()=>{i(!1),t.onSaveItemDescription(o)}},d("span",{className:"mg-upc-icon upc-font-save"}),d("span",null,at("Save")))),t.editable&&Rt(t.list,"quantity")&&d("div",{className:"mg-upc-dg-quantity"},d("small",null,at("Quantity")),d("input",{"aria-label":at("Quantity"),type:"number",value:a,onChange:function(){r(event.target.value)}})),t.editable&&!n&&d("div",null,d("button",{"aria-label":"Remove item",onClick:t.onRemove},d("span",{className:"mg-upc-icon upc-font-trash"}))))},an=function(t){return new Promise((function(e,n){const i=document.createElement("script");let o=!1;i.type="text/javascript",i.src=t,i.async=!0,i.onerror=function(t){n(t,i)},i.onload=i.onreadystatechange=function(){o||this.readyState&&"complete"!=this.readyState||(o=!0,setTimeout((function(){e()}),100))},(document.head||document.body||document.documentElement).appendChild(i)}))},rn=function(t){var e,n,i;const o=z(null),s=z((e=>{t.onMove(e)}));return G((()=>{s.current=t.onMove})),G((()=>{let e=!1;if(Rt(t.list,"sortable")){const t=()=>{e=Sortable.create(o.current,{handle:".mg-upc-dg-item-handle",group:"shared",animation:150,onUpdate:function(t){s.current(t)}})};"undefined"!=typeof Sortable?t():an(Ot()).then((()=>{t()}))}return()=>{e&&e.destroy()}})),d(_,null,d("ul",{className:"mg-upc-dg-list-fake mg-upc-dg-on-loading"},[0,1,2].map((e=>d("li",{className:"mg-upc-dg-item"},Rt(t.list,"sortable")&&d(_,null,d("span",{className:"mg-upc-dg-item-handle-skeleton"},"  ",d(Zt,{width:"1.5em"}),"  "),d("span",{className:"mg-upc-dg-item-number-skeleton"},"  ",d(Zt,{width:"1em"}),"  ")),Rt(t.list,"vote")&&d(_,null,d("span",{className:"mg-upc-dg-item-number-skeleton"},"  ",d(Zt,{width:"1em"}),"  ")),d("div",{className:"mg-upc-dg-item-skeleton-image"},d(Zt,{width:"5em",height:"5em"})),d("div",{className:"mg-upc-dg-item-data"},d(Zt,{count:2})))))),d("ul",{ref:o,className:"mg-upc-dg-list"},0===(null==t||null===(e=t.items)||void 0===e?void 0:e.length)&&d("span",null,"There are no items in this list"),(null==t||null===(n=t.items)||void 0===n?void 0:n.length)>0&&(null===(i=t.items)||void 0===i?void 0:i.map)&&t.items.map((e=>d(sn,{list:t.list,item:e,editable:t.editable,onRemove:()=>t.onRemove(t.list,e),onSaveItemDescription:n=>t.onSaveItemDescription(t.list,e,n),onSaveItemQuantity:n=>t.onSaveItemQuantity(t.list,e,n),key:e.ID+":"+e.post_id})))),Rt(t.list,"vote")&&d("span",{className:"mg-upc-dg-total-votes"}," ",at("Total votes:")," ",d("span",null," ",t.list.vote_counter)))},ln=function(t){const e=z(null),n=z(null),i=at("Copy"),[o,s]=X(i);G((()=>{let t=null;o!==i&&(t=setTimeout((()=>{s(i),clearTimeout(t)}),2e3))}),[o]);const a=encodeURIComponent(t.link),r=encodeURIComponent(t.title);let l=[{name:"Twitter",url:"https://twitter.com/share?url="+a+"&text="+r},{name:"Facebook",url:"https://www.facebook.com/sharer/sharer.php?u="+a+"&quote="+r},{name:"Pinterest",url:"https://pinterest.com/pin/create/button/?url="+a+"&description="+r},{name:"Whatsapp",url:"whatsapp://send?text="+a},{name:"Telegram",url:"https://t.me/share/url?url="+a+"&text="+r},{name:"LiNE",url:"https://social-plugins.line.me/lineit/share?url="+a+"&text="+r},{slug:"email",name:at("Email"),url:"mailto:?subject="+r+"&body="+a}];return void 0!==Dt().shareButtons&&(l=l.filter((t=>Dt().shareButtons.includes(t.slug||t.name.toLowerCase())))),d("div",{className:"mg-upc-dg-share-link"},d("input",{ref:e,value:t.link,onClick:function(){e.current.setSelectionRange(0,e.current.value.length)},readOnly:!0}),d("button",{ref:n,onClick:function(t){var n;(n=e.current).focus(),n.setSelectionRange(0,n.value.length),document.execCommand&&document.execCommand("copy")?s(at("Copied!")):s("Error!")}},d("span",{className:"mg-upc-icon upc-font-copy"}),d("span",null,o)),l.map((function(t){return(e=t).slug||(e.slug=e.name.toLowerCase()),d("a",{href:e.url,title:"Share with "+e.name,className:"mg-upc-dg-share",target:"_blank",rel:"noopener"},d("div",{className:"mg-upc-share-btn-img mg-upc-share-"+e.slug}," "));var e})))},cn=function(t){var e;const{state:n,dispatch:i}=Z(zt),[o,s]=X(!1),a=z(!1),r=z(!1);function l(t){t<1||t>n.listTotalPages||"loading"===n.status||i(ve({page:t}))}return G((()=>{const t=n.list;let e=!1,o=!1;if(t&&Rt(t,"sortable")){const t=()=>{a.current&&n.listPage<n.listTotalPages&&(e=Sortable.create(a.current,{group:"shared",onAdd:t=>{i(Ne(t.oldIndex))}})),a.current&&n.listPage>1&&(o=Sortable.create(r.current,{group:"shared",onAdd:t=>{i(ke(t.oldIndex))}}))};"undefined"!=typeof Sortable?t():an(Ot()).then((()=>{t()}))}return()=>{e&&e.destroy(),o&&o.destroy()}}),[n.list,n.listPage,n.listTotalPages]),G((()=>{s(!1)}),[n.editing,n.list,n.addingPost]),d(_,null,n.editing&&d(on,{list:n.list,addingPost:n.addingPost,onSave:function(t){if(-1===n.list.ID||t.title!==n.list.title||t.content!==n.list.content||t.status!==n.list.status)if(-1===n.list.ID){var e;const o={};o.title=t.title,o.content=t.content,o.type=t.type,o.status=t.status,null!==(e=n.addingPost)&&void 0!==e&&e.post_id&&(o.adding=n.addingPost.post_id),i(he(o))}else{const e={id:n.list.ID};t.status!==n.list.status&&(e.status=t.status),t.title!==n.list.title&&(e.title=t.title),t.content!==n.list.content&&(e.content=t.content),i(ge(e))}},onCancel:function(){i(ae(!1)),-1===n.list.ID&&(i(fe(!1)),i(oe()),i(le()))}}),!n.editing&&d(_,null,d("div",{className:"mg-upc-dg-top-action"},function(t){var e,n;const i=t.type;return Ht(i,"editable_title")||Ht(i,"editable_content")||(null===(e=jt(i))||void 0===e||null===(n=e.available_statuses)||void 0===n?void 0:n.length)>1}(n.list)&&d("button",{className:"mg-upg-edit",onClick:()=>i(ae(!0))},d("span",{className:"mg-upc-icon upc-font-edit"}),d("span",null,at("Edit"))),n.list.link&&d("button",{className:"mg-upg-share",onClick:()=>s(!o)},d("span",{className:"mg-upc-icon upc-font-share"}),d("span",null,at("Share"))),"cart"===n.list.type&&d("button",{className:"mg-upg-share",onClick:function(){i(re(n.list.ID))}},d("span",{className:"mg-upc-icon upc-font-cart"}),d("span",null,at("Add all to cart")))),o&&n.list.link&&d(ln,{link:n.list.link,title:n.list.title}),n.list.content&&d("p",{className:"mg-upc-dg-list-desc",dangerouslySetInnerHTML:{__html:Ft(n.list.content)}}),d(Zt,{count:3}),d(rn,{list:n.list,items:(null===(e=n.list)||void 0===e?void 0:e.items)||[],onMove:function(t){i(Pe(t.oldIndex,n.list,t.newIndex))},onRemove:function(t,e){i(ye(e.post_id))},onSaveItemDescription:function(t,e,n){i(we(e.post_id,{description:n}))},onSaveItemQuantity:function(t,e,n){i(we(e.post_id,{quantity:n}))},editable:t.editable})),(!n.editing||!n.list)&&n.listTotalPages>1&&d(ie,{totalPages:n.listTotalPages,page:n.listPage,onPreview:function(){l(n.listPage-1)},onNext:function(){l(n.listPage+1)},prevRef:r,nextRef:a}))};function un(t){return parseInt(t.author,10)===parseInt(Dt().user_id,10)}function dn(){"replaceState"in history?(history.replaceState("",document.title,location.pathname),history.go(-1)):location.hash=""}D(d((t=>{const[e,n]=K(qt,Gt);return d(zt.Provider,{value:{state:e,dispatch:Kt(n,(()=>e))}},t.children)}),null,d((function(){const{state:t,dispatch:e}=Z(zt),n=J((()=>Wt(t.addingPost)),[t.addingPost]),i=z(!1);let o="listOfList";if(t.addingPost)o=t.editing?"addingToNew":"adding";else if(t.editing){var s;o=-1!==(null===(s=t.list)||void 0===s?void 0:s.ID)?"edit":"new"}else o=t.list?"list":"listOfList";const a={container:"mg-upc-dg-container",overlay:"mg-upc-dg-overlay",dialog:"mg-upc-dg-content"+(t.errorCode?" mg-upc-err-"+t.errorCode:""),title:"mg-upc-dg-title",closeButton:"mg-upc-dg-close"};G((()=>{window.showMyLists=function(){r()},window.addItemToList=function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"view";e(oe()),n?(e(be(n,t,o)),i.current.show()):l(t)},window.removeItemFromList=function(t,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"view";e(oe()),e(ye(t,n,o)),i.current.show()},window.mgUpcAddListToCart=Bt}),[i.current,e]);const r=()=>{e(oe()),e(le()),i.current.show()},l=t=>{e(se({post_id:t})),e(le({addingPost:t})),i.current.show()};function c(n){n<1||n>t.totalPages||"loading"===t.status||e(de(n))}const u="list"===o||"new"===o||"edit"===o||"addingToNew"===o;return d(nn,{id:"mg-upc-dg-dialog",dialogRef:function(t){i.current=t},title:t.title,classNames:a,onBack:!!u&&function(){switch(o){case"list":default:r();break;case"new":e(fe(!1)),e(ae(!1)),r();break;case"edit":e(ae(!1));break;case"addingToNew":e(fe(!1)),e(ae(!1)),e(le({addingPost:t.addingPost.post_id}))}}},d("div",{className:"mg-upc-dg-content-wrapper mg-upc-dg-status-"+t.status+" mg-upc-dg-view-"+o},d("div",{className:"mg-upc-dg-wait"}),t.message&&d("div",{className:"mg-upc-dg-msg"},t.message,d("a",{href:"#",className:"mg-upc-dg-alert-close","aria-label":"Hide alert",onClick:t=>{t.preventDefault(),e({type:ct,payload:null})}},d("span",{className:"mg-upc-icon upc-font-close"}))),t.error&&d("div",{className:"mg-upc-dg-error"},t.error,d("a",{href:"#",className:"mg-upc-dg-alert-close","aria-label":"Hide alert",onClick:t=>{t.preventDefault(),e({type:lt,payload:null})}},d("span",{className:"mg-upc-icon upc-font-close"}))),d("div",{className:"mg-upc-dg-body"},!t.error&&t.addingPost&&d(Ie,{item:t.addingPost,onSaveItemDescription:function(n){e(se({...t.addingPost,description:n}))}}),("listOfList"===o||"adding"===o)&&d(_,null,d("div",{className:"mg-upc-dg-top-action"},n.length>0&&!t.error&&d("button",{className:"mg-list-new",onClick:function(t){e(ae(!0)),e(fe(!0)),i.current.show()}},d("span",{className:"mg-upc-icon upc-font-add"}),d("span",null,at("Create List")))),d(xe,{lists:t.listOfList,onSelect:function(n){e(ae(!1)),t.addingPost?e(be(n.ID,t.addingPost)):(e(fe(n)),i.current.show())},onRemove:!t.addingPost&&function(t){e(ue(t.ID))},loadPreview:function(){c(t.page-1)},loadNext:function(){c(t.page+1)}})),t.list&&d(cn,{editable:un(t.list)}))))}),null)," "),document.querySelector("body")),"#my-lists"===location.hash&&dn(),window.addEventListener("hashchange",(function(){"#my-lists"===location.hash&&(window.showMyLists(),dn())}),!1),window.mgUpcApiClient=Lt,window.mgUpcListeners=function(){jQuery(".mg-upc-post-add").on("click",(function(){return jQuery(this).data("post-id")>0&&window.addItemToList(jQuery(this).data("post-id"),(jQuery(this).data("upc-list")+"").length>0&&jQuery(this).data("upc-list")),!1})),jQuery(".mg-upc-post-remove").on("click",(function(){return jQuery(this).data("post-id")>0&&void 0!==jQuery(this).data("upc-list")&&window.removeItemFromList(jQuery(this).data("post-id"),(jQuery(this).data("upc-list")+"").length>0&&jQuery(this).data("upc-list")),!1}))},window.mgUpcListeners()})();